---
layout: post
title: ROS新人演習3：シミュレータでTurtlebot3を動かそう！
date: 
type: post
parent_id: '0'
published: false
password: ''
status: draft
categories:
- 未分類
tags: []
meta:
  _edit_last: '2'
  the_page_seo_title: ''
  the_page_meta_description: ''
  the_page_meta_keywords: ''
  the_page_noindex: '0'
  the_page_nofollow: '0'
  the_page_canonical_url: ''
  the_page_ads_novisible: '0'
  page_type: default
  the_page_read_time_novisible: '0'
  the_page_toc_novisible: '0'
  update_level: high
  the_review_enable: '0'
  the_review_type: Product
  the_review_name: ''
  the_review_rate: '5'
  redirect_url: ''
  the_page_no_amp: '0'
  _custom_css: ''
  _custom_js: ''
  the_page_memo: ''
  sns_image_url: ''
  _thumbnail_id: '16283'
author:
  login: demu
  email: info@demura.net
  display_name: demu
  first_name: ''
  last_name: ''
permalink: "/"
---
<p>この記事はROS新人教育プログラムのシミュレータ演習の記事です。シミュレータGAZEBOを使い、Turtlebot3を動かします。次のTurtleBot3 e-Manualを参考にしています。</p>
<ul>
<li><a href="http://emanual.robotis.com/docs/en/platform/turtlebot3/overview/">TurtleBot3 e-Manual</a></li>
</ul>
<p><strong>1. 設定</strong></p>
<p>~/.bashrcの最後の3行をgeditを使って以下のように設定し保存する。</p>
<p><a href="https://demura.net/wordpress/wp-content/uploads/2019/10/SnapCrab_NoName_2019-10-12_16-59-20_No-00-1.png"><img class="aligncenter size-full wp-image-16283" src="{{ site.baseurl }}/assets/images/SnapCrab_NoName_2019-10-12_16-59-20_No-00-1.png" alt="" width="878" height="467" /></a></p>
<p><strong>2.  Turtlebot3 リモートPC用のパッケージインストール</strong><br />
まず、Turtlebot用のパッケージをインストール。端末を開き、次のコマンドを実行。２番目は長いのでコピペする。$はコマンドプロンプトなので入力しない。</p>
<ul>
<li>$ <code>sudo apt update</code></li>
<li>$ <code>sudo apt upgrade</code></li>
<li>$ <code>sudo apt-get install ros-melodic-joy ros-melodic-teleop-twist-joy ros-melodic-teleop-twist-keyboard ros-melodic-laser-proc ros-melodic-rgbd-launch ros-melodic-depthimage-to-laserscan ros-melodic-rosserial-arduino ros-melodic-rosserial-python ros-melodic-rosserial-server ros-melodic-rosserial-client ros-melodic-rosserial-msgs ros-melodic-amcl ros-melodic-map-server ros-melodic-move-base ros-melodic-urdf ros-melodic-xacro ros-melodic-compressed-image-transport ros-melodic-rqt-image-view ros-melodic-navigation<br />
</code></li>
<li>$ <code>cd ~/catkin_ws/src/</code></li>
<li>$ <code>git clone https://github.com/ROBOTIS-GIT/turtlebot3_msgs.git</code></li>
<li>$ <code>git clone https://github.com/ROBOTIS-GIT/turtlebot3.git</code></li>
<li>$ <code>git clone https://github.com/ROBOTIS-GIT/turtlebot3_simulations.git</code></li>
<li>$ <code>git clone https://github.com/ROBOTIS-GIT/turtlebot3_gazebo_plugin.git</code></li>
<li>$ <code>cd ~/catkin_ws</code></li>
<li>$ <code>catkin build</code></li>
</ul>
<p><strong>3. rvizの起動</strong></p>
<p>端末を開き次のコマンドを実行すると、ROSの視覚化ツールrvizが起動する。</p>
<p>$  <code>export TURTLEBOT3_MODEL=burger</code><br />
$  <code>roslaunch turtlebot3_fake turtlebot3_fake.launch</code></p>
<p>別の端末を開き、次のコマンドを実行</p>
<p>$ <code>roslaunch turtlebot3_teleop turtlebot3_teleop_key.launch</code></p>
<p>演習１で実施したようにキーボードでturtlebot3を動かせます。動かしてみましょう！</p>
<p><a href="https://demura.net/wordpress/wp-content/uploads/2019/10/SnapCrab_NoName_2019-10-12_17-12-17_No-00.png"><img class="aligncenter size-large wp-image-16284" src="{{ site.baseurl }}/assets/images/SnapCrab_NoName_2019-10-12_17-12-17_No-00-1024x557.png" alt="" width="1024" height="557" /></a></p>
<p><strong>4.  Simulator GAZEBOを動かそう</strong></p>
<p>次のコマンドでROSのシミュレータGazeboを起動する。</p>
<p>$ <code>roslaunch turtlebot3_gazebo turtlebot3_empty_world.launch</code></p>
<p>初回はネットからモデルを取得するので、私の環境で5分程度かかった。しばらくすると次のようなウインドウが開く。下のロボットがturtlebot3。<br />
<a href="http://demura.net/wordpress/wp-content/uploads/2018/11/No-0116.png"><img class="aligncenter size-full wp-image-15257" src="{{ site.baseurl }}/assets/images/No-0116.png" alt="" width="1477" height="749" /></a></p>
<p>別の端末を開き、次のコマンドを入力するとキーボードからロボットを操縦するためのlaunchファイルを起動。<br />
$  <code>roslaunch turtlebot3_teleop turtlebot3_teleop_key.launch</code></p>
<p>端末に下のように表示される。<span style="color: #ff0000;">w a s d x</span><span style="color: #ff0000;"> </span>キーでロボットを操作できる。いずれかのキーを押してロボットを動かそう！マウスのカーソルがturtlebot3_teleop_key.launchを起動した端末上になければ動かないので注意。</p>
<p><a href="http://demura.net/lecture/13868.html/attachment/control" rel="attachment wp-att-13879"><img class="aligncenter size-full wp-image-13879" src="{{ site.baseurl }}/assets/images/control.png" alt="" width="814" height="510" /></a></p>
<p>お疲れ様！</p>
