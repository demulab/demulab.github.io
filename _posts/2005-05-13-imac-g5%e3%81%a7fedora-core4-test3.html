---
layout: post
title: iMac G5でFedora Core4 test3
date: 2005-05-13 12:40:40.000000000 +09:00
type: post
parent_id: '0'
published: true
password: ''
status: publish
categories:
- misc
tags: []
meta:
  _edit_last: '2'
  views: '2013'
  syntaxhighlighter_encoded: '1'
author:
  login: demu
  email: info@demura.net
  display_name: demu
  first_name: ''
  last_name: ''
permalink: "/misc/211.html"
---
<p><img src="{{ site.baseurl }}/assets/images/2005/05/fedora4.jpg" alt="fedora core4 test3 screen shot" width="320" height="336" /></p>
<p>普段はPentiumマシンを使っていますが、シンプルなデザインに惹かれiMac　G5 20inchを初めて購入しました。とはいえ普段の仕事ではLinuxを使用する機会も多いのでiMac G5にインストールできるLinuxを調べたところ、Fedora Core4からPower PCにも正式に対応するのでそのテスト版であるFedora Core4 test3を利用できそうです。</p>
<p>以下はそのインストールメモです。詳しく書いていないためこのとおり実施してもうまくいかない可能性が大きく、またパーティションを切りなおしOSをインストールしなおすのでハードディスクの中身が一度全て消えます。さらにFedora Core4 test3は正式リリース前のテスト版なので通常の運用には適しません。そもそもMacにLinuxをインストール必要性はあまりありません。この記事を参考にする場合は自己責任でインストールしてください。<br />
 <!--more--><br />
 1. FC4-test3-ppc-DVD.isoを国内のミラーサーバ（例えば<a href="http://ftp.riken.jp/Linux/fedora/core/test/3.92/ppc/iso/">ftp.riken.jp</a>)からダウンロードし、 DVDに焼く<br />
 2. 1のDVDではiMac G5をブートできなかったのでppc64用のブートイメージboot.isoをミラーサーバ（例えば<a href="http://ftp.riken.jp/Linux/fedora/core/test/3.92/ppc/os/images/mac64/">ftp.riken.jp</a>）からダウンロードしてCD-Rに焼く<br />
 3. LinuxとデュアルブートするためMacのハードディスクにパーティションを切り、OS Xの再インストールを行った。iMacは購入時250GBのハードディスクが１パーティション構成である。OS　XのCDを入れてCを押しながら起動したら、ドライブ設定→初期化→パーティション作成を実施する。Mac用に約150GB、Linux用に約100GBを確保し150GBへOS Xをインストールした。<br />
 4. 2のCD-RでiMacをブートする。その際にCキーを押しながら起動する。<br />
 boot: のプロンプトが出たら　linux text と入力してリターンキーを押す。<br />
 しばらくするとインストール方法と表示されるのでローカルCDROMを選択しOKを押す。<br />
 Fedora CoreのCDを挿入するように指示があるので１のDVDを入れる。基本的にはPentiumマシンとインストールは同じであるが、パーティション構成とブートローダが違う。<br />
 5. パーティション構成を以下とした。これらの切り分けにはFedora Core標準のDisk Druidを利用した。linuxのfdiskに相当するmac-fdiskもある。</p>
<blockquote><p>/dev/sda1                                　　Apple Partition Map<br />
 /dev/sda2          1MB    hfs         　  Apple Bootstrap パーティション<br />
 /dev/sda3  136415MB  　hfs+ 　      　　OS X用<br />
 /dev/sda4  101804MB 　 ext3        　 Linux用<br />
 /dev/sda5     1020MB  　linux-swap 　Linuxのスワップ</p>
</blockquote>
<p>なお、sda1はApple Partition MapといってOS Xをインストールするとハードディスクの先頭にあり、これはDisk Druidからは見えない。<br />
 sda2はブートローダyabootを置くためbootstrapパーティションでApple Partition Mapのすぐあとに設定する必要があるそうです。Disk DruidでファイルシステムのタイプにApple Bootstrapを選択るとサイズは自動的に1MBとなる。<br />
 6. 後はPentiumマシンのインストールと同じ要領<br />
 7. Xの設定<br />
 iMac G5は最近マイナーチェンジしてグラフィックボードがATI Radeon 9600に変わったらしい。私のはNVIDIA GeForce FX5200なのでFedoraのインストーラーでNVIDIA GeForce FX (generic)と認識され800x600で表示された。test2ではシステム設定→ディスプレイでうまく設定できなかったが、test3ではビデオカードタイプをNVIDIA GeForce FX5100、モニタータイプ: Apple Cinema Display 20 LCDを設定し、解像度：1680x1050、色の深さ：数百万の色を選べば問題なく表示した。</p>
<p>8. 以上でLinuxを使えるようになったがこのままではLinuxしか起動しない。そのため、/etc/yaboot.confを設定する必要がある。以下のその例である。この設定をbootstrapパーティションに反映させるためには /sbin/ybin -v コマンドを実行しなければならない。うまく設定されるとコンピュータ起動時に、lを押すとFedora Core、xを押すとMac OS Xが起動する。</p>
<blockquote><p># yaboot.conf generated by anaconda<br />
 boot=/dev/sda2<br />
 init-message=Welcome to Fedora Core\!<br />
 Hit  for boot options</p>
<p>partition=4<br />
 timeout=80<br />
 install=/usr/lib/yaboot/yaboot<br />
 delay=5<br />
 enablecdboot<br />
 enableofboot<br />
 enablenetboot<br />
 macosx=/dev/sda3<br />
 magicboot=/usr/lib/yaboot/ofboot</p>
<p>image=/boot/vmlinuz-2.6.11-1.1286_FC4<br />
 label=linux<br />
 read-only<br />
 initrd=/boot/initrd-2.6.11-1.1286_FC4.img<br />
 append="rhgb quiet root=LABEL=/"</p>
</blockquote>
<p>9. おしまい</p>
