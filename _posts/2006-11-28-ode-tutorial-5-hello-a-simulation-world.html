---
layout: post
title: 'ODE Tutorial 5: Hello a Simulation World !'
date: 2006-11-28 21:55:02.000000000 +09:00
type: post
parent_id: '0'
published: true
password: ''
status: publish
categories:
- english
tags: []
meta:
  _edit_last: '2'
  views: '1700'
author:
  login: demu
  email: info@demura.net
  display_name: demu
  first_name: ''
  last_name: ''
permalink: "/english/346.html"
---
<p>This time,  I show a super simple sample program which uses ODE (Open Dynamics Engine) .  In many programming books, printing "Hellow World" is the first sample program.  For physics simulation programming books, I think a simulation of free fall is the most simple  example.</p>
<p><img src="{{ site.baseurl }}/assets/images/2006/11/sample1.jpg" alt="ODE" width="320" height="310" /></p>
<p>A screen shot of  free fall</p>
<p><!-- ▼追記▼ --></p>
<p>[code]<br />
//  hello.cpp by  Kosei Demura</p>
<p>#include  //ODE the header file<br />
#include  //drawing header file</p>
<p>#ifdef  dDOUBLE<br />
#define dsDrawSphere  dsDrawSphereD<br />
#endif</p>
<p>static dWorldID world;   // For kinetics calculation<br />
dBodyID ball;   // Ball<br />
const dReal radius = 0.2, mass = 1.0;  // Radius of ball [m], weight of ball [kg]</p>
<p>// Simulation loop is called and executed each simlation loop.<br />
// dynamics is calculated by dWorldStep().<br />
static void simLoop (int pause)<br />
{<br />
const dReal *pos, *R;</p>
<p>// If you want more accuracy, you should set step size more small<br />
// in this case, step size is 0.01 [s]<br />
dWorldStep (world,0.01);</p>
<p>dsSetColor (1.0,0.0,0.0);         // Setting of red  (R, G, B)<br />
pos = dBodyGetPosition (ball);  // Getting the position of the ball<br />
R = dBodyGetRotation (ball);    // Getting the orientation of the ball<br />
dsDrawSphere (pos, R, radius); // Drawing the sphere as the ball<br />
}</p>
<p>void START ()<br />
{ //setting of camera<br />
static float xyz [ 3 ] = {0.0, -3.0,1.0};  // Position of a view point [m]<br />
static float hpr [ 3 ] = {90.0,0.0,0.0};   // Direction of a gaze [°]<br />
dsSetViewpoint (xyz, hpr);  // Setting of the view point and the gaze<br />
}</p>
<p>// Please read from main functional here.<br />
int main (int argc,  char **argv)<br />
{<br />
dReal x0 = 0.0, y0 = 0.0, dReal z0 = 1.0;  // Initial position of a ball<br />
dMass m1;</p>
<p>dsFunctions fn;                // Class for draw staff<br />
fn.version = DS_VERSION;  // Version of draw staff<br />
fn.start = &amp;start;             // Preprocessing function of simulation<br />
fn.step = &amp;simLoop;  // A function is called with each step of simulation<br />
fn.command = NULL; //  A function for a key board<br />
// In the case of no function, appointing the NULL pointer<br />
fn.stop = NULL;      //<br />
fn.path_to_textures = "../.. /drawstuff/textures";  // Path to the texture files</p>
<p>// Creation of the world for dynamics calculation<br />
world = dWorldCreate ();<br />
dWorldSetGravity (world,0,0, -0.001); // Acceleration of free fall [m/s^2]</p>
<p>// Creation of a ball<br />
body = dBodyCreate (world);  // Creation of  a ball<br />
dMassSetZero (&amp;m1);  // Initialization of a weight parameter m1<br />
dMassSetSphereTotal (&amp;m1, mass, radius); // Calculating m1 of the ball<br />
dBodySetMass (ball, &amp;m1);  // Setting m1 to the ball<br />
dBodySetPosition (ball, x0, y0, z0);  // Setting the position of the ball</p>
<p>// Simulation loop<br />
dsSimulationLoop (argc, argv,352,288, &amp;fn);  // Window Size 352 x 288</p>
<p>// Destruction of the world<br />
dWorldDestroy (world);</p>
<p>return 0;<br />
}<br />
[/code]</p>
<p>This is the program of free fall of the  red ball.  "world" is the  software container where kinetics is calculated.  Being for the first time to experient the world of  physics, let's call this sample program as "Hello World".</p>
<p>The function which starts with the small letter 'd'  is the API (Application Program Interface), and the function which starts with 'ds' is the API of  drawstuff. Drawstuff is the library for ODE, to test sample programs.</p>
<p>Now, let's download<a href="http://demura.net/archives/images/ode/sample1.tgz">this file</a>, and excute the program as follows !</p>
<p><strong>Execution method</strong><br />
1. Sample1.tgz download under /home/ user name /src/ode/ode<br />
2. From now on please execute the command below  with the terminal. The $ is prompt.<br />
$ <span style="color: #ff3300;">cd /home/ user name /src/ode/ode</span><br />
$ <span style="color: #ff0000;">tar xvzf sample1.tgz</span><br />
$ <span style="color: #ff3300;">cd  sample1</span><br />
$ <span style="color: #ff0000;">make</span><br />
3. Execution<br />
$<span style="color: #ff3300;">. /sample1 </span></p>
<p>The red ball is falling slowly, but passing  through the ground, and vanished.<br />
To tell the truth it meaning that collision detection function  is not installed in the program above.</p>
<p>The next time, collision detection function is added in this  program.</p>
<p>(last modified 2008-1-13)</p>
