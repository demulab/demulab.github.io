---
layout: post
title: 'ODE Tutorial 14:  Let a simulate be interactive !'
date: 2007-01-09 14:52:01.000000000 +09:00
type: post
parent_id: '0'
published: true
password: ''
status: publish
categories:
- english
tags: []
meta:
  _edit_last: '2'
  views: '570'
author:
  login: demu
  email: info@demura.net
  display_name: demu
  first_name: ''
  last_name: ''
permalink: "/english/365.html"
---
<p>This page was maily translated from http://demura.net/archives/9ode by <a href="http://babelfish.altavista.com/">Babel Fish Translation</a>.</p>
<p align="center"><img src="{{ site.baseurl }}/assets/images/2007/01/pillars.jpg" alt="" width="320" height="263" align="middle" /></p>
<p>A New Year !    This is the 14th ODE (Open Dynamic Engine)  Tutorial. It meaning that a demand that is many, in question we would like to do  simulation to interactive, it made sample program 5 and increased.  With ODE, being to accept the input from the keyboard in  simulation, when it draws up the function and the like which,  corresponds to the key which it inputs interactive the blotch …  ration becomes possible. Don't you think? ODE and ブログ  interactive the place is one of charm.</p>
<p>Just the important part the source code is shown below.  This program modifies sample2, indicates cylindrical object in  other than the ball, makes the re-start of simulation possible with  the input from the keyboard including external force.</p>
<p><!--more--><br />
[code]<br />
/*** Preparation of the  drawstuff ***/<br />
void  prepDrawStuff()<br />
{<br />
fn.version = DS_VERSION;<br />
fn.start   = &amp;start;<br />
fn.step    = &amp;simLoop;<br />
fn.command = &amp;command;　// an address of a command function<br />
fn.stop    = NULL;<br />
fn.path_to_textures = "../../drawstuff/textures";<br />
}</p>
<p>/** * a function which is called by a key input ***/<br />
void command(int cmd)<br />
{<br />
switch (cmd) {<br />
case ’s’: dBodyAddForce(pillar.body,50, 0, 0);break;　// when ’s’ key is pressed<br />
case ‘j’: dBodyAddForce(ball.body    ,0,-10, 0);break;<br />
case ‘k’: dBodyAddForce(ball.body    ,0,  0,50);break;<br />
case ‘l’: dBodyAddForce(ball.body    ,0, 10, 0);break;<br />
case ‘r’:restart()                            ;break;<br />
}<br />
}</p>
<p>/***  Simulation restart ***/<br />
void restart()<br />
{<br />
//  destruction<br />
dJointGroupDestroy(contactgroup);　// a contact group<br />
destroyBall();<br />
destroyCylinder();</p>
<p>//  Creation<br />
contactgroup = dJointGroupCreate(0);<br />
createBall();<br />
createPillar();<br />
}</p>
<p>/*** Destruction of a ball ***/<br />
void destroyBall()<br />
{<br />
dBodyDestroy(ball.body);<br />
dGeomDestroy(ball.geom);<br />
}</p>
<p>void destroyCylinder()<br />
{<br />
dBodyDestroy(pillar.body);<br />
dGeomDestroy(pillar.geom);<br />
}</p>
<p>static void simLoop (int pause)<br />
{<br />
if (!pause) {<br />
dSpaceCollide(space,0,&amp;nearCallback);<br />
dWorldStep(world,0.01);<br />
dJointGroupEmpty(contactgroup);<br />
}<br />
drawObject(ball.geom,1.3,0,0);<br />
drawObject(pillar.geom,0,0,1.3);<br />
}<br />
[/code]</p>
<p>As for command function it is the function which  processes the input from the keyboard. The letter of 'r' and the like which is to the right of case corresponds to the letter where the keyboard is pushed. If the processing which is necessary for  this part is written, interactive it becomes possible to make  simulation. Here, when the 'r' key is pushed, restart function  is called, simulation re-is started.</p>
<p>Furthermore,being<a href="http://babelfish.altavista.com/babelfish/trurl_pagecontent?lp=ja_en&amp;trurl=http%3a%2f%2fdemura.net%2farchives%2fimages%2fode%2fsample5.tgz" target="_self">to be here,</a>downloading,please execute<a href="http://babelfish.altavista.com/babelfish/trurl_pagecontent?lp=ja_en&amp;trurl=http%3a%2f%2fdemura.net%2farchives%2fimages%2fode%2fsample5.tgz" target="_self">the source  code</a>.<br />
When s, j and k of the keyboard, the l key is pushed, external  force works in the cylinder and the ball, when the r key is pushed,  simulation restarts, while pushing the control key, when you push the  p key, stops at one time. Trial that.</p>
