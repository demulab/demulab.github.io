---
layout: post
title: wordpressでdopvstar*を使う
date: 2008-01-13 10:50:20.000000000 +09:00
type: post
parent_id: '0'
published: true
password: ''
status: publish
categories:
- misc
tags: []
meta:
  _edit_last: '2'
  views: '467'
author:
  login: demu
  email: info@demura.net
  display_name: demu
  first_name: ''
  last_name: ''
permalink: "/misc/475.html"
---
<p>wordpress移行に関してのメモです．</p>
<p>movabletypeでは<a href="http://tech.bayashi.net/">bayashi.net</a>さんのアクセス解析cgi スクリプト<a href="http://tech.bayashi.net/ds/">dopvstar*</a>を使って，各ページのアクセス数とサイトのページビュー数をカウントしていました．movabletypeではdopvstar*用のプラグインがあり簡単に設定できましたが，wordpressでは見つけることができなかったので手動で設定しました．以下はそのメモです．</p>
<p><!--more--></p>
<ul>
<li>パーマリンク構造のカスタマイズ<br />
各種設定→パーマリンク設定画面で，「独自表記を以下の入力欄に記述」にチェックをいれ，以下のようにカスタマイズすること前提です．このように設定しないとsingle.phpの設定は有効になりません．</li>
</ul>
<p>/%category%/%post_id%.html</p>
<ul>
<li>index.phpの設定　（以下のコードを最後に挿入）</li>
</ul>
<p>[code]<br />
Total<br />
<img src="{{ site.baseurl }}/assets/images/2008/01/dsw.cgi?count=total" border="0" alt="カウンタ" /></p>
<p>Today<br />
<img src="{{ site.baseurl }}/assets/images/2008/01/dsw.cgi?count=today" border="0" alt="カウンタ" /></p>
<p>Yesterday<br />
<img src="{{ site.baseurl }}/assets/images/2008/01/dsw.cgi?count=yesterday" border="0" alt="カウンタ" /></p>
<p><a href="http://tech.bayashi.net"><br />
<script type="text/javascript"><!--</p>
<p>//  - ログ取得CGIへのパス(相対パスもしくはURL)<br />
var pa = "http://パス/ds/dsw.cgi";<br />
//  - ページ名(半角英数文字のみ)<br />
var pg = "HomePage";<br />
//  - 出力タイプ(g=gifカウンタ, p=pngカウンタ, m=gifロゴ, n=出力ナシ<br />
var p = "n";<br />
//  - カウントアップしないなら "no"<br />
var cnt = "";</p>
<p>var a="&#038;&"; var pf=navigator.platform; var lng=navigator.language;<br />
var swh=screen.width+"x"+screen.height;<br />
var cd=screen.colorDepth; var pd=screen.pixelDepth; var rf=document.referrer;</p>
<p>document.write("<img src=""+pa+"?xx=",new Date().getSeconds(),a+"pg="+pg+a+"p="+p+a+"md=j"+a+"cnt="+cnt+a+"pf="+pf+a+"lng="+lng+a+"swh="+swh+a+"cd="+cd+a+"pd="+pd+a+"rf="+rf+"" mce_src="&quot;+pa+&quot;?xx=&quot;,new Date().getSeconds(),a+&quot;pg=&quot;+pg+a+&quot;p=&quot;+p+a+&quot;md=j&quot;+a+&quot;cnt=&quot;+cnt+a+&quot;pf=&quot;+pf+a+&quot;lng=&quot;+lng+a+&quot;swh=&quot;+swh+a+&quot;cd=&quot;+cd+a+&quot;pd=&quot;+pd+a+&quot;rf=&quot;+rf+&quot;" alt='アクセス解析' border='0' />");<br />
//<br />
// --></script></a></p>
<noscript><a href="http://tech.bayashi.net">&lt;br /&gt; &lt;img src="http://パス/ds/dsw.cgi?p=n&amp;#038;&amp;md=nj&amp;#038;&amp;pg=HomePage" mce_src="http://パス/ds/dsw.cgi?p=n&amp;amp;&amp;amp;md=nj&amp;amp;&amp;amp;pg=HomePage"&gt;&lt;br /&gt; </a></noscript>
<p>[/code]</p>
<ul>
<li>single.phpの設定　（以下のコードを最後に挿入）</li>
</ul>
<p>[code]<br />
<a href="http://tech.bayashi.net"><br />
<script type="text/javascript"><!--</p>
<p>//  - ログ取得CGIへのパス(相対パスもしくはURL)<br />
var pa = "http://パス/ds/dsw.cgi";<br />
//  - ページ名(半角英数文字のみ)<br />
var pg = "";<br />
//  - 出力タイプ(g=gifカウンタ, p=pngカウンタ, m=gifロゴ, n=出力ナシ<br />
var p = "n";<br />
//  - カウントアップしないなら "no"<br />
var cnt = "";</p>
<p>var a="&#038;&"; var pf=navigator.platform; var lng=navigator.language;<br />
var swh=screen.width+"x"+screen.height;<br />
var cd=screen.colorDepth; var pd=screen.pixelDepth; var rf=document.referrer;</p>
<p>document.write("<img src=""+pa+"?xx=",new Date().getSeconds(),a+"pg="+pg+a+"p="+p+a+"md=j"+a+"cnt="+cnt+a+"pf="+pf+a+"lng="+lng+a+"swh="+swh+a+"cd="+cd+a+"pd="+pd+a+"rf="+rf+"" mce_src="&quot;+pa+&quot;?xx=&quot;,new Date().getSeconds(),a+&quot;pg=&quot;+pg+a+&quot;p=&quot;+p+a+&quot;md=j&quot;+a+&quot;cnt=&quot;+cnt+a+&quot;pf=&quot;+pf+a+&quot;lng=&quot;+lng+a+&quot;swh=&quot;+swh+a+&quot;cd=&quot;+cd+a+&quot;pd=&quot;+pd+a+&quot;rf=&quot;+rf+&quot;" alt='アクセス解析' border='0' />");<br />
// --></script></a></p>
<noscript><a href="http://tech.bayashi.net">&lt;br /&gt; &lt;img src="http://パス/ds/dsw.cgi?p=n&amp;#038;&amp;md=nj&amp;#038;&amp;pg=&lt;?php the_id(); ?&gt;"&gt;&lt;br /&gt; </a></noscript>
<p><a href="http://tech.bayashi.net"><br />
<img src="{{ site.baseurl }}/assets/images/2008/01/dsw.cgi?p=g&amp;&amp;pg=&lt;?php the_id(); ?&gt;&amp;&amp;count=total_pg" border="0" alt="カウンタ" /></a><br />
[/code]</p>
