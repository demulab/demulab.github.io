---
layout: post
title: Step 1：　ODE初体験
date: 2008-03-14 08:15:39.000000000 +09:00
type: post
parent_id: '0'
published: true
password: ''
status: publish
categories:
- ode
- ODE本
tags: []
meta:
  _edit_last: '2'
  views: '2119'
author:
  login: demu
  email: info@demura.net
  display_name: demu
  first_name: ''
  last_name: ''
permalink: "/robot/9ode/416.html"
---
<p><img title="Robot Simulation" src="{{ site.baseurl }}/assets/images/2008/03/step1.jpg" alt="Open Dynamics Engine" width="320" height="240" /></p>
<p>ODE本　Step1  扉図のカラー画像</p>
<hr />今年度から講義で本格的にODE本を使い、現在進行形です。プログラミング初心者の学生がわかりづらい箇所を補足して行く予定です。<br />
2008-3-14: プログラム1.1用のVC++2008EE用のプロジェクトファイルを追加<br />
2008-2-7：EX1.11の補足を追加<br />
2008-2-1：EX1.8の補足を追加</p>
<hr />ODE本「<a href="http://www.amazon.co.jp/gp/product/4627846916?ie=UTF8&amp;tag=demuranet-22&amp;linkCode=as2&amp;camp=247&amp;creative=1211&amp;creativeASIN=4627846916">簡単!実践!ロボットシミュレーション - Open Dynamics Engineによるロボットプログラミング</a>」のStep１では，ODE初体験ということで，リンゴの落下，ボールの跳ね返り，１本脚ロボットのシミュレータを作りながらODEの使い方をマスターします．<br />
以下にStep1の全ソースコードとシミュレータの動画を掲載します．zipで圧縮されているソースコードは<a href="http://demura.net/archives/2007/05/sourceCode.html">ここを参考にして</a>解凍・コンパイル・実行してください．それ以外のソースコードはプログラムの一部なので，そのままではコンパイルできません．なお，本サンプルプログラムのコンパイル・実行は自己責任で行ってください．特に，本物のロボットに適用するための安全性などを全く考慮していませんので，そのような用途には向きません．著者及び森北出版は本プログラムによって生じたあらゆる結果についての責任を負いかねます．ご了承した方だけダウンロードしてください．また，再配布はお止めください．</p>
<hr /><object classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" width="290" height="240" codebase="http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=6,0,40,0"><param name="flashvars" value="file=http://demura.net/archives/ode/robotsimu/pro101.flv&amp;autostart=true" /><param name="src" value="http://demura.net/flvplayer.swf" /><embed type="application/x-shockwave-flash" width="290" height="240" src="http://demura.net/flvplayer.swf" flashvars="file=http://demura.net/archives/ode/robotsimu/pro101.flv&amp;autostart=true"></embed></object></p>
<ul>
<li>プログラム1.1：　りんごの落下　(P7)</li>
</ul>
<ul>
<li>説明：ニュートンさんの逸話でおなじみのリンゴの落下です．でも，衝突検出が組み込まれていないので...．以下のソースコードを見ればわかりますが，このようなプログラムならたった５０行です．上の動画は解像度を落としているので美しくありませんが，実際はたなびく雲が美しいですよ．</li>
<li>ソースコード：<a href="http://demura.net/archives/images/ode/robotsimu/pro1-1-070602.zip">pro1-1-070602.zip</a> (2007-6-2)
<ul>
<li><a href="http://demura.net/archives/images/ode/vc/pro1-1.vcproj">pro1-1.vcproj </a> (Visual C++ 2008 Express Edition用のプロジェクトファイル, 2008-3-14)</li>
</ul>
</li>
</ul>
<hr /><object classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" width="290" height="240" codebase="http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=6,0,40,0"><param name="flashvars" value="file=http://demura.net/archives/ode/robotsimu/pro102.flv&amp;autostart=true" /><param name="src" value="http://demura.net/flvplayer.swf" /><embed type="application/x-shockwave-flash" width="290" height="240" src="http://demura.net/flvplayer.swf" flashvars="file=http://demura.net/archives/ode/robotsimu/pro102.flv&amp;autostart=true"></embed></object></p>
<ul>
<li>プログラム1.2：　ボールの跳ね返り (P15)</li>
</ul>
<ul>
<li>説明：衝突検出を組み込み地面を突き抜けなくなりましたが，跳ね返ることはできません．反発係数を設定して跳ね返るようにしましょう．</li>
<li>ソースコード：<a href="http://demura.net/archives/images/ode/robotsimu/pro1-2-070602.zip">pro1-2-070602.zip</a> (2007-6-2)</li>
</ul>
<hr /><object classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" width="290" height="240" codebase="http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=6,0,40,0"><param name="flashvars" value="file=http://demura.net/archives/ode/robotsimu/pro103.flv&amp;autostart=true" /><param name="src" value="http://demura.net/flvplayer.swf" /><embed type="application/x-shockwave-flash" width="290" height="240" src="http://demura.net/flvplayer.swf" flashvars="file=http://demura.net/archives/ode/robotsimu/pro103.flv&amp;autostart=true"></embed></object></p>
<ul>
<li>プログラム1.3：　１本脚ロボット (P24)</li>
</ul>
<ul>
<li>説明：球と円柱を関節で結合し，１本脚ロボットを作ります．Step1を学ぶことで関節のあるロボットを作ることができます．Step2では関節の動かし方を学びます．</li>
<li>ソースコード：<a href="http://demura.net/archives/images/ode/robotsimu/pro1-3-070602.zip">pro1-3-070602.zip</a> (2007-6-2)</li>
</ul>
<hr /><strong>エクササイズの補足説明</strong></p>
<ul>
<li> EX1.2 (P12)
<ul>
<li> 上のソースコードをc:\msys\1.0\home\ユーザ名\src\ode-0.9\myprogの中にダウンロードする。myprogフォルダー（ディレクトリ）がない場合は作成する。</li>
<li> Windowsの解凍ソフトを使ってpro1-1-070602.zipをダウンロードした場所に解凍する。解凍する場所が違うと実行できない。解凍に成功すると以下のフォルダができ、pro1-1の中にhello.cpp、makefileなどがある。解凍ソフトによっては余分なフォルダを作り、その中にpro1-1フォルダーができる場合がある。そのときは、pro1-1をmyprogの下に移動する。<br />
c:\msys\1.0\home\ユーザ名\src\ode-0.9\myprog\pro1-1</li>
<li> デスクトップのMSYSアイコンをダブルクリックしてウインドウを開き，以下のコマンドで移動する。<br />
cd src/ode-0.9/myprog/pro1-1</li>
<li> 以下のコマンドでコンパイルする<br />
make</li>
<li> 実行形式のファイルができているので，そのファイル名を入力すると実行される。この例ではhelloとなる。<br />
hello</li>
<li> <span style="color: red;"> <strong>なお，makeしたときにdsDrawSphereDに関連するエラーメッセージが出る場合は，ODEを単精度でインストールしています。この教科書ではエラーが発生しづらい倍精度を基本としていますので，その場合は<a href="http://demura.net/9ode/392.html">このページ</a>のODE B.インストール　4.コンパイルの準備から実行してください。 </strong> </span></li>
</ul>
</li>
<li> EX1.8 (P21)
<ul>
<li> 直方体を作るためには、その各辺の長さを格納する要素数３個の配列を準備すると便利です。P15の12行目と13行目の間に以下を挿入しましょう。<br />
static dReal side[3] = {0.2, 0.2, 0.2};<br />
なお、dsDrawBox()に引数として配列を渡すわけですが、Ｃ言語では配列そのものを渡すことができないので、そのアドレスを渡します。配列名（この例ではside）は配列が格納されている先頭のアドレスでしたね。</li>
<li> 後は、P94のプログラム3.5に直方体を使った例があるので、参考にすると出来るでしょう。</li>
</ul>
</li>
<li> EX1.11 (P27)
<ul>
<li> 可動域を変更して、そのまま実行しても変化を確かめることができません。<br />
重量加速度を次のように変えてください。<br />
dWorldSetGravity(world, 0.0, 0.2, -9.8);</li>
</ul>
</li>
<p>（最終更新日　2008-2-8)</ul>
