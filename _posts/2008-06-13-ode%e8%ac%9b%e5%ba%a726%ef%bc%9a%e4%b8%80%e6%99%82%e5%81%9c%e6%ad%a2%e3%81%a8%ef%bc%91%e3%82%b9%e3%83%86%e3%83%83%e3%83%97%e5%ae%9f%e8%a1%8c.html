---
layout: post
title: ODE講座26：ちょっと待って！一時停止と１ステップ実行
date: 2008-06-13 09:37:42.000000000 +09:00
type: post
parent_id: '0'
published: true
password: ''
status: publish
categories:
- ode
tags: []
meta:
  _aioseop_title: ODE講座26
  _aioseop_keywords: Open Dynamics Engine
  _edit_last: '2'
  views: '1970'
author:
  login: demu
  email: info@demura.net
  display_name: demu
  first_name: ''
  last_name: ''
permalink: "/robot/9ode/513.html"
---
<p>かつさんのご質問を受けて約１ヶ月ぶりにODE(Open Dynamics Engine)講座を開講します．Robomec2008ではdemura.netの読者から，リップサービスだと思いますが「楽しみにしているよ」と声をかけて頂き，それを真に受けて遣り甲斐が出てきました．学会などで見かけたら気軽に声をかけてください．</p>
<p>さて，ODEのシミュレーションは速すぎるのでちょっと待ってと一時停止や１ステップ実行したい場合が多いですよね．ODE本P41～42にシミュレーションの一時停止と１ステップ実行の方法を簡潔に記載しましたが，わかりづらいようなのでここで補足します．</p>
<p>ODE付属の３Dライブラリdrawstuffでは，以下のようにキーコマンドが実装されています．</p>
<ul>
<li>テクスチャのON/OFF : Ctrl + t</li>
<li>影のON/OFF: Ctrl + s</li>
<li>強制終了：　Ctrl + x</li>
<li>一時停止のON/OFF: Ctrl + p</li>
<li>１ステップ実行：　Ctrl + o (アルファベットのオー）</li>
</ul>
<p>ここで，Ctrl + t　はコントロールキーとtキーを同時に押すという意味です．</p>
<p>なお，<span style="color: #0000ff;"><strong>一時停止と１ステップ実行を実行するためには，停止したい部分を以下のようにif文で囲む必要があります．</strong></span>simLoopの引数pauseは一時停止に関するフラグで，初期値は０で，Ctrl + tを押すたびに１と０に反転します．下のコードではCtrl+tを押さない限りシミュレーションは進行します．シミュレーションの初期状態で停止したい場合は <strong>if (pause) { </strong>にしてください．</p>
<p>なお，一時停止したい場合はCtrl+ oを押すたびに１ステップ実行しますので，シミュレーションではとても重宝すると思いますよ．お試しあれ！</p>
<pre>[cpp]
// 引数pauseは一時停止のフラグ，初期値は0
static void simLoop(int pause)
{
   if (!pause) {　// !　は否定です．つまり，１なら0, 0なら１です．
　　　// やりたい処理をここに書く
   　dSpaceCollide(space, 0, &amp;nearCallback);
     dWorldStep(world, 0.01);
     dJointGroupEmpty(contactgroup);
   }
   // 描画に関するコードをここに書く
}
[/cpp]</pre>
