---
layout: post
title: Visual C++ 2008 EEを使った自作ODEプログラムのビルド法
date: 2008-07-27 23:10:13.000000000 +09:00
type: post
parent_id: '0'
published: true
password: ''
status: publish
categories:
- ode
- ODE本
tags: []
meta:
  _edit_last: '2'
  views: '10527'
  syntaxhighlighter_encoded: '1'
author:
  login: demu
  email: info@demura.net
  display_name: demu
  first_name: ''
  last_name: ''
permalink: "/robot/9ode/1159.html"
---
<ul>
<li><strong><a href="http://demura.net/9ode/4120.html">この記事は古いです．最新のODE0.11.1用のVisaul C++ 2008 EEを作った自作ODEプログラムのビルド法はこちらをごらんください．</a></strong></li>
</ul>
<p><br class="spacer_" /></p>
<p>Visual C++ 2008 EEを使い自分で作成したODEプログラムのビルド法を説明します．</p>
<ul>
<li><strong><a name="a3"></a>環境設定 </strong>
<ul>
<li><strong>システム環境変数の設定 (Windows Vista)</strong>
<ol type="a">
<li>ここでは、ODEとdrawstuffに関するdllの場所をシステムに教える設定をします。</li>
<li>コントロールパネルを開き、「システムとメンテナンス」の項目を選択すると以下の画面になる。 「システム」があるので選択する。<br />
 <a href="http://demura.net/wordpress/wp-content/uploads/2008/07/vc11.jpg"><img class="alignnone size-full wp-image-1167" title="vc11" src="{{ site.baseurl }}/assets/images/2008/07/vc11.jpg" alt="" width="500" height="305" /></a><a href="http://demura.net/wordpress/wp-content/uploads/2008/07/vc1.jpg"><br />
 </a></li>
<li>「システムのプロパティ」の画面になるので、下にある「環境変数(<span style="text-decoration: underline;">N</span>)」をクリックする。<br />
 <a href="http://demura.net/wordpress/wp-content/uploads/2008/07/vc21.jpg"><img class="alignnone size-full wp-image-1168" title="vc21" src="{{ site.baseurl }}/assets/images/2008/07/vc21.jpg" alt="" width="500" height="305" /></a> </li>
<li>「環境変数」ウインドウが開くので、「システム環境変数(<span style="text-decoration: underline;">S</span>)」のPathを編集する。 つまり、「システム環境変数(<span style="text-decoration: underline;">S</span>)」のPathにカーソルを当てクリックしてから、 「編集(<span style="text-decoration: underline;">I</span>)」をクリックする。 </li>
<li>「システム変数の編集」ウインドウが開くので、「変数値(<span style="text-decoration: underline;">V</span>)」の一番最後に以下を追加する。なお、C:¥ode-バージョン番号¥binの前にある記号はセミコロン<strong>;</strong>です。また，バージョン番号にはお使いのODEのバージョン番号を入れてください．ここでは，ode-0.10.1をお使いの方はバージョン番号に0.10.1を入れてください． <br />
 <strong> ;C:¥ode-バージョン番号¥lib¥DebugDoubleLib</strong><strong><span style="color: #ff0000;"><br />
 注意：上の文字列をカット＆ペーストで貼り付けると失敗します。上の文字列は表示の関係で全角文字が含まれています。半角英数文字で入力しなければなりません。</span></strong> <br />
 <!--more--><a href="http://demura.net/wordpress/wp-content/uploads/2008/07/vc42.jpg"><img class="alignnone size-full wp-image-1178" title="vc42" src="{{ site.baseurl }}/assets/images/2008/07/vc42.jpg" alt="" width="458" height="407" /></a></li>
</ol>
</li>
<li><strong>作業用フォルダの確認</strong>
<ul>
<li>ここでは、Visual C++標準のフォルダの中に自作ODEプログラム用のフォルダーmyprogを作り、それを作業用フォルダーとして使います．<br />
 C:¥Documents and Settings¥ユーザ名¥My Documents¥Visual Studio 2008¥Projects¥myprog</li>
</ul>
</li>
<li><strong>drawstuffフォルダのコピー</strong>
<ul>
<li>C:¥ode-バージョン番号¥drawstuffフォルダを丸ごと上のProjectsフォルダの中にコピーします。 これは、ODE本のサンプルプログラムでは空や地面の模様を表すテクスチャファイルの場所を、実行ファイルから相対位置で指定しているためです。 絶対パスで指定すれば必要ありませんが、互換性に欠けてしまうので相対パスで指定しています。</li>
</ul>
</li>
<li>Visual C++ 2008 EEの設定
<ul>
<li>ツール(T)→オプション(O)を選択</li>
<li>VC++ディレクトリのインクルードファイルを以下のように追加する．<br />
 C:¥ode-バージョン番号¥include<br />
 <a href="http://demura.net/wordpress/wp-content/uploads/2008/07/vcinclude.jpg"><img class="alignnone size-full wp-image-1191" title="vcinclude" src="{{ site.baseurl }}/assets/images/2008/07/vcinclude.jpg" alt="" width="500" height="343" /></a></li>
<li>VC++ディレクトリのライブラリファイルを以下のように追加する．<br />
 C:¥ode-バージョン番号¥lib¥DebugDoubleLib<br />
 <a href="http://demura.net/wordpress/wp-content/uploads/2008/07/vclib.jpg"><img class="alignnone size-full wp-image-1192" title="vclib" src="{{ site.baseurl }}/assets/images/2008/07/vclib.jpg" alt="" width="500" height="342" /></a></li>
</ul>
</li>
</ul>
</li>
<hr />
<li> <strong>自作プログラムのビルド法</strong>
<ul>
<li> <strong><a name="a4"></a> I. プロジェクトファイルを使わない方法 </strong>
<ol type="a">
<li>ここでは、自分でODEを使ったプログラムを作成する方法を紹介しましょう。ソースコードを一から作成するのは大変なので、ODE本のサンプルプログラムpro1-1を使います。このプログラムはボールが自由落下するだけのとても簡単なプログラムです。
<ul>
<li><a href="http://demura.net/archives/images/ode/robotsimu/pro1-1-070602.zip">ここをクリックしてpro1-1をダウンロードしてください。</a></li>
</ul>
</li>
<li>ダウンロードしたzipファイルを作業用フォルダの中で解凍します。解凍後はこの例では以下のようになります。
<ul>
<li>C:￥Users¥ユーザ名¥Documents¥Visual Studio 2008¥Projects￥myprog¥pro1-1</li>
</ul>
</li>
<li>Visual C++の「ファイル(<span style="text-decoration: underline;">F</span>)」→「新規作成(<span style="text-decoration: underline;">N</span>)」→「プロジェクト(<span style="text-decoration: underline;">P</span>)」を選択。 <img src="{{ site.baseurl }}/assets/images/2008/07/newproject.jpg" alt="" /></li>
<li>プロジェクトの種類はWin32コンソールアプリケーションを選ぶ。 ここでは「プロジェクト名(<span style="text-decoration: underline;">N</span>)」を「pro1-1」とします。標準では「ソリューション名(<span style="text-decoration: underline;">M</span>)」はプロジェクト名と同じになるので、あえて入力する必要はありません。 <br />
 <a href="http://demura.net/wordpress/wp-content/uploads/2008/07/vcnewproject.jpg"><img class="alignnone size-medium wp-image-1262" title="vcnewproject" src="{{ site.baseurl }}/assets/images/2008/07/vcnewproject-300x156.jpg" alt="" width="300" height="156" /></a> </li>
<li>「Win32　アプリケーション　ウィザードへようこそ」の画面が開く、「次へ&gt;」をクリックする。 <img src="{{ site.baseurl }}/assets/images/2008/07/win32wizard0.jpg" alt="" /></li>
<li><span style="color: #ff0000;"><strong>「アプリケーションの設定」になるので、以下のように「空のプロジェクト(<span style="text-decoration: underline;">E</span>)」を選ぶ　（重要）。</strong></span> <span style="color: #0000ff;"><strong>今 回はODE本のサンプルプログラムをそのまま使うのでこのようにします。また、自分で一から作成する場合でも、「空のプロジェクト」を選択しないと stdafx.hという謎のヘッダファイルをインクリードしたり、main関数の代わりに_tmain関数を含んだファイルが自動されます。今まで習って きた標準C++言語の常識が全く通用しないMicorsoftの世界に陥ってしまうので教育用途としてはお勧めできません。</strong></span><img src="{{ site.baseurl }}/assets/images/2008/07/win32wizard.jpg" alt="" /></li>
<li>「ソースファイル」→「追加(<span style="text-decoration: underline;">D</span>)」→「既存の項目(<span style="text-decoration: underline;">G</span>)」を選択し、ODE本のサンプルプログラムhello.cppを選ぶ。<br />
 <img src="{{ site.baseurl }}/assets/images/2008/07/kizonTuika.jpg" alt="" /></li>
<li>「リソースファイル」→「追加(<span style="text-decoration: underline;">D</span>)」→「既存の項目(<span style="text-decoration: underline;">G</span>)」を選択し、Projects￥drawstuff￥src￥resource.rcを追加する．<br />
 <a href="http://demura.net/wordpress/wp-content/uploads/2008/07/vcresource.jpg"><img class="alignnone size-full wp-image-1189" title="vcresource" src="{{ site.baseurl }}/assets/images/2008/07/vcresource.jpg" alt="" width="500" height="393" /></a><br />
 Projectsフォルダーにdrawstuffフォルダがない場合は，C:¥ode-バージョン番号¥drawstuffフォルダを丸ごと上のProjectsフォルダの中にコピーする。<br />
 <a href="http://demura.net/wordpress/wp-content/uploads/2008/07/vc6.jpg"><img class="alignnone size-full wp-image-1183" title="vc6" src="{{ site.baseurl }}/assets/images/2008/07/vc6.jpg" alt="" width="500" height="187" /></a><br />
 <a href="http://demura.net/wordpress/wp-content/uploads/2008/07/vcresource.jpg"><br />
 </a></li>
<li>「プロジェクト(<span style="text-decoration: underline;">P</span>)」→「pro1-1のプロパティ(<span style="text-decoration: underline;">P</span>)」を選択する。 <img src="{{ site.baseurl }}/assets/images/2008/07/property.jpg" alt="" /></li>
<li>「構成プロパティ」→「全般」の出力ディレクトリを.（ドット）に変更する．<br />
 <a href="http://demura.net/wordpress/wp-content/uploads/2008/07/vcoutputdir.jpg"><img class="alignnone size-medium wp-image-1263" title="vcoutputdir" src="{{ site.baseurl }}/assets/images/2008/07/vcoutputdir-300x194.jpg" alt="" width="300" height="194" /></a></li>
<li>「構成プロパティ」→「C/C++」→「プリプロセッサ」を選択し、右欄の「プリプロセッサの定義」に以下を追加する. dDOUBLEの前はセミコロン．<strong><br />
 ;dDOUBLE<br />
 </strong><a href="http://demura.net/wordpress/wp-content/uploads/2008/07/vcddouble1.jpg"><img class="alignnone size-full wp-image-1188" title="vcddouble1" src="{{ site.baseurl }}/assets/images/2008/07/vcddouble1.jpg" alt="" width="500" height="324" /></a> </li>
<li>「構成プロパティ」→「リンカ」→「入力」を選択し、右欄の「追加の依存ファイル」に 以下のようにライブラリを追加する。 <strong><br />
 ode_doubled.lib</strong> <strong>drawstuffd.lib  opengl32.lib  glu32.lib  winmm.lib</strong><br />
 <a href="http://demura.net/wordpress/wp-content/uploads/2008/07/vclibs.jpg"><img class="alignnone size-full wp-image-1194" title="vclibs" src="{{ site.baseurl }}/assets/images/2008/07/vclibs.jpg" alt="" width="500" height="326" /></a><a href="http://demura.net/wordpress/wp-content/uploads/2008/07/vc51.jpg"><br />
 </a></li>
<li>ビルドする。つまり、「ビルド(<span style="text-decoration: underline;">B</span>)」→「pro1-1のビルド(<span style="text-decoration: underline;">U</span>)」を選択する。 <img src="{{ site.baseurl }}/assets/images/2008/07/build.jpg" alt="" /></li>
<li> 成功するとpro1-1フォルダの中に実行ファイル pro1-1.exeが作成される。<br />
 <a href="http://demura.net/wordpress/wp-content/uploads/2008/07/pro1-11.jpg"><img class="alignnone size-medium wp-image-1264" title="pro1-11" src="{{ site.baseurl }}/assets/images/2008/07/pro1-11-300x194.jpg" alt="" width="300" height="194" /></a><a href="http://demura.net/wordpress/wp-content/uploads/2008/07/pro1-1.jpg"><br />
 </a> </li>
<li>pro1-1.exeをダブルクリックして実行する。成功すると以下のウインドウが開く。 <img src="{{ site.baseurl }}/assets/images/2008/07/hello.jpg" alt="" /></li>
<li>おしまい。お疲れ様！</li>
</ol>
</li>
</ul>
<hr />
	</li>
<li><a name="a5"></a><strong>Ⅱ. 既存のプロジェクトファイルを利用する方法</strong>
<ol type="a">
<li>ここでは、「Ⅰ．プロジェクトファイルを使わない方法」で作成したプロジェクトファイルを利用する方法を説明します。こちらの方がより簡単です．</li>
<li><a href="http://demura.net/wordpress/wp-content/uploads/2008/07/pro1-3-080727.zip">pro1-3-080727.zip</a>をダウンロードして、作業フォルダに展開する。この例では次のようになる。 <br />
 <strong>C:¥Users¥ユーザ名¥Documents¥Visual Studio 2008¥Projects¥myprog¥pro1-3</strong></li>
<li>上で作成したpro1-1.vcprojが<strong>pro1-3</strong>フォルダの中にある．プロジェクトファイルの名前pro1-1.vcprjを<strong>pro1-3.vcproj</strong>に変更する。</li>
<li><strong>pro1-3.vcproj</strong>をダブルクリックしてVisual C++を開く。ソリューションエクスプローラーの中のフォルダ名が<strong>pro1-1</strong>になっているので、カーソールを当て右マウスボタンをクリックして「名前の変更(<span style="text-decoration: underline;">M</span>)」を選択し、<strong>pro1-3</strong>に名前を変更する。 <br />
 <a href="http://demura.net/wordpress/wp-content/uploads/2008/07/vcnamechange.jpg"><img class="alignnone size-medium wp-image-1220" title="vcnamechange" src="{{ site.baseurl }}/assets/images/2008/07/vcnamechange-300x232.jpg" alt="" width="300" height="232" /></a><a href="http://demura.net/wordpress/wp-content/uploads/2008/07/vcname.jpg"><br />
 </a></li>
<li>pro1-3の「ソースファイル」の<strong>hello.cpp</strong>にカーソールを当て、右マウスボタンをクリックして、「削除(<span style="text-decoration: underline;">V</span>)」を選択し<strong>hello.cpp</strong>を削除する。<br />
 <a href="http://demura.net/wordpress/wp-content/uploads/2008/07/vchello1.jpg"><img class="alignnone size-medium wp-image-1222" title="vchello1" src="{{ site.baseurl }}/assets/images/2008/07/vchello1-300x208.jpg" alt="" width="300" height="208" /></a><a href="http://demura.net/wordpress/wp-content/uploads/2008/07/vcode.jpg"><br />
 </a></li>
<li>「ソースファイル」にカーソールを当て、右マウスボタンをクリックして、「追加(<span style="text-decoration: underline;">D</span>)」→「既存の項目(<span style="text-decoration: underline;">G</span>)」を選択する。<br />
 <a href="http://demura.net/wordpress/wp-content/uploads/2008/07/vcadd4.jpg"><img class="alignnone size-medium wp-image-1223" title="vcadd4" src="{{ site.baseurl }}/assets/images/2008/07/vcadd4-300x206.jpg" alt="" width="300" height="206" /></a><a href="http://demura.net/wordpress/wp-content/uploads/2008/07/vcadd.jpg"><br />
 </a></li>
<li>「既存項目の追加」ウインドウが開くので<strong>monoBot.cpp</strong>を選択し、「追加(<span style="text-decoration: underline;">A</span>)」ボタンをクリックする。 </li>
<li>ビルドする。つまり、「pro1-3のビルド(<span style="text-decoration: underline;">U</span>)」を選択する。すると、すぐにソリューションファイル<strong>pro1-3.sln</strong>を保存するよう聞かれるので「保存(<span style="text-decoration: underline;">S</span>）」をクリックする。 <br />
 <a href="http://demura.net/wordpress/wp-content/uploads/2008/07/vssave21.jpg"><img class="alignnone size-medium wp-image-1265" title="vssave21" src="{{ site.baseurl }}/assets/images/2008/07/vssave21-300x210.jpg" alt="" width="300" height="210" /></a><a href="http://demura.net/wordpress/wp-content/uploads/2008/07/vssave1.jpg"><br />
 </a></li>
<li>成功すると実行ファイルpro1-3.exeができる。</li>
<li>pro1-3.exeをダブルクリックして実行する。<br />
 <a href="http://demura.net/wordpress/wp-content/uploads/2008/07/monobot1.jpg"><img class="alignnone size-medium wp-image-1227" title="monobot1" src="{{ site.baseurl }}/assets/images/2008/07/monobot1-300x246.jpg" alt="" width="300" height="246" /></a> </li>
</ol>
</li>
<li>これで、本当のおしまい。お疲れ様！</li>
</ul>
