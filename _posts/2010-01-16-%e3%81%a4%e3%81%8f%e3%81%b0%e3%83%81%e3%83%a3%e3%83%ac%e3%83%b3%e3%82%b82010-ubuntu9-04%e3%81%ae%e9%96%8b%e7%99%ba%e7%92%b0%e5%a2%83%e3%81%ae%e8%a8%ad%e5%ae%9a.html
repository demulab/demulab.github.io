---
layout: post
title: 'つくばチャレンジ2010: Ubuntu9.04の開発環境の設定'
date: 2010-01-16 16:29:04.000000000 +09:00
type: post
parent_id: '0'
published: true
password: ''
status: publish
categories:
- つくばチャレンジ
tags: []
meta:
  _edit_last: '2'
  views: '609'
author:
  login: demu
  email: info@demura.net
  display_name: demu
  first_name: ''
  last_name: ''
permalink: "/robot/tukuba-challenge/5876.html"
---
<p>３年生の卒研プレゼミでつくばチャレンジで使用したロボットを動かす講習をしている．ロボットのOSはUbuntu9.04なので，その開発環境の設定メモ。</p>
<p>なお，Ubuntu9.10では以下の方法ではBoost, Urg, imcs01でエラーが出る。特に，imcs01ドライバのソースコードはカーネル2.6.20番台でないとビルドできない。Ubuntu9.04を使っている場合でもシステムをアップグレードしないこと。</p>
<p><!--more--></p>
<ul>
<li><span style="background-color: #ffffff;">ユーザの設定</span>
<ul>
<li>ユーザ名: demulab</li>
<li>/home/demulab/.bashrcの変更
<ul>
<li>cd</li>
<li>cp   .bashrc    .bashrc.org</li>
<li><a href="http://demura.net/wordpress/wp-content/uploads/2009/12/bashrc">bashrc</a>をダウンロードし、/home/demulab/に保存する</li>
<li>cp   bashrc    .bashrc</li>
<li>なお、QTのインストール先が違う場合は.bashrcの次の行を自分のディレクトリに変更すること
<ul>
<li>QTDIR=/home/demulab/qtsdk-2009.03/qt</li>
</ul>
</li>
</ul>
</li>
<li>ルートのパスワード設定
<ul>
<li>sudo  su</li>
<li>パスワードを聞かれるので入力する</li>
<li>passwd</li>
</ul>
</li>
</ul>
</li>
<li><span style="background-color: #ffffff;">ネットワークの設定</span>
<ul>
<li>システム→設定→ネットワークのプロキシ</li>
<li>KIT情報処理サービスセンタのページを参考にネットワークのプロキシを設定する。</li>
</ul>
</li>
<li><span style="background-color: #ffffff;">日本語環境のセットアップ</span>
<ul>
<li><span style="background-color: #ffffff;">システム→システム管理→日本語環境セットアップヘルパで必要なソフトをインストール</span></li>
</ul>
</li>
<li>C, C++言語の開発環境　
<ul>
<li>sudo aptitude install build-essential</li>
</ul>
</li>
<li>Qtのインストール
<ul>
<li>http://qt.nokia.com/downloads-jpからhttp://www.qtsoftware.com/downloads/sdk-linux-x11-32bit-cpp　を/home/demulab/に　ダウンロード</li>
<li>chmod u+x  qt-sdk-linux-x86-opensource-2009.03.1.bin</li>
<li>./qt-sdk-linux-x86-opensource-2009.03.1.bin</li>
<li>Setupのウインドウが開くので指示に従ってインストール</li>
<li>Qtが原因のエラーをなくすために以下のパッケージをインストール</li>
<li>sudo aptitude install libglib2.0-dev</li>
<li>sudo aptitude install libxrender-dev</li>
<li>sudo aptitude install libfontconfig1-dev</li>
</ul>
</li>
<li>SDLのインストール
<ul>
<li>sudo aptitude install libSDL1.2-dev</li>
<li>sudo aptitude install libsdl-net1.2-dev</li>
</ul>
</li>
<li>Boostのインストール：BoostのバージョンとUrgのバージョンは依存性があるので変更しないこと
<ul>
<li>sudo aptitude install libboost1.35-dev libboost1.35-dbg libboost1.35-doc</li>
</ul>
</li>
<li>Urg-0.8.0のインストール
<ul>
<li>cd</li>
<li>mkdir src</li>
<li><span style="background-color: #ffffff;">ここから<a href="http://his.kanazawa-it.ac.jp/~demura/research/demulab/software/urg-0.8.0.tgz">urg-0.8.0.tgz</a>をダウンロードし，/home/demulab/srcの中にダウンロードする</span>
<ul>
<li>なお，ユーザ名，パスワードはプレゼミ時連絡する．</li>
</ul>
</li>
<li><span style="background-color: #ffffff;">tar xvzf  urg-0.8.0.tgz</span></li>
<li><span style="background-color: #ffffff;">cd  urg-0.8.0</span></li>
<li>./configure</li>
<li>make</li>
<li>sudo make install</li>
<li>なお、Ubuntuのパッケージインストールする場合はboost1.35でないとmakeで失敗する。</li>
</ul>
</li>
<li>gpsdのインストール
<ul>
<li>gpsdと通信するクライアントプログラムを作成するためにソースコードを取ってきて参考にした．ライブラリはソースコード付属のlibgps.aを使用．</li>
<li><a href="http://gpsd.berlios.de/">gpsd - a gps service deamon</a>からgpsd-2.39.tar.gzをダウンロード</li>
<li>sudo apt-get install  automake</li>
<li>sudo apt-get install libtool</li>
<li>sudo apt-get install libmotif-dev</li>
<li>sudo apt-get install libxp-dev</li>
<li>sudo apt-get install libxaw7-dev</li>
<li>./autogen.sh</li>
<li>make</li>
<li>sudo make install</li>
</ul>
</li>
<li>モータコントローラ用ドライバのインストール
<ul>
<li><span style="background-color: #ffffff;">ここから<a href="http://his.kanazawa-it.ac.jp/~demura/research/demulab/software/urbtc2.6.tgz">urbtc2.6.tgz</a>をダウンロードし，/home/demulab/srcの中にコピーする．</span>
<ul>
<li>なお，ユーザ名，パスワードはプレゼミ時連絡する．</li>
</ul>
</li>
<li>cd  src</li>
<li>tar xvzf   urbtc2.6.tgz</li>
<li>成功すると/home/demulab/src/urbtc2.6/driver/urbtc.koというファイルが生成される．ない，場合はもう一度，注意深く上記の作業を実行．</li>
<li>/etc/rc.localのexit 0の一行上に以下のコードを書く．
<ul>
<li>/sbin/insmod  /home/demulab/src/urbtc2.6/driver/urbtc.ko</li>
</ul>
</li>
</ul>
</li>
<li>音声合成ライブラリのインストール
<ul>
<li><span style="background-color: #ffffff;">sudo apt-get install  libepeak-dev</span></li>
<li><span style="background-color: #ffffff;">sudo apt-get install  libportaudio-dev</span></li>
</ul>
</li>
<li>ソースコードのダウンロードとmake
<ul>
<li>ここから<a href="http://his.kanazawa-it.ac.jp/~demura/research/demulab/software/tukuba5-091217.tgz">tukuba5-091217.tgz</a>をダウンロードし，/home/demulab/srcの中にコピーする．
<ul>
<li>なお，ユーザ名，パスワードはプレゼミ時連絡する．</li>
</ul>
</li>
<li>cd  src</li>
<li>tar  xvzf   tukuba5-091217.tgz</li>
<li>cd  tukuba5-091217</li>
<li>qmake</li>
<li>make</li>
<li>./start</li>
<li>なお、標準の設定ではモータコントローラimcs01のデバイスファイルがルート権限でないと読み書きできないのでユーザで実行させたいときはchmodコマンドなどでパーミッションの変更が必要。</li>
</ul>
</li>
<li>ソースコードの変更箇所
<ul>
<li>走行テストのために以下の変更する</li>
<li>navigation.cpp: 45行目のnavigationTukuba2009()をコメントアウトし、46行目のnavigationTest0()のコメントを外す</li>
<li>navigation.h: 26行目にnavigationTest0()を追加</li>
<li>laser.cpp: 12行目の#define DEBUGのコメントを外す</li>
</ul>
</li>
<li>エラー時の対処方法
<ul>
<li>qmakeをすると　"WARNING: Found potential symbol conflict of　…."　と怒られる
<ul>
<li>原因：Qt3とQt4のライブラリが衝突する</li>
<li>解決：
<ul>
<li><span style="background-color: #ffffff;">sudo  apt-get  remove  qt3-dev-tools  libqt3-mt-dev</span></li>
<li><span style="background-color: #ffffff;">sudo  apt-get   autoremove</span></li>
</ul>
</li>
</ul>
</li>
<li>/usr/bin/qmakeを削除し、~/qtsdk-2009.03/qt/bin/qmakeを~/binにコピーする。
<ul>
<li>sudo  rm  /usr/bin/qmake</li>
<li>cp  ~/qtsdk-2009.03/qt/bin/qmake   ~/bin</li>
</ul>
</li>
</ul>
</li>
</ul>
