---
layout: post
title: シミュレータで学ぶＣ言語　[ミッション１：ボールを追跡せよ]
date: 2011-04-15 01:04:05.000000000 +09:00
type: post
parent_id: '0'
published: true
password: ''
status: publish
categories:
- ode
tags: []
meta:
  _edit_last: '2'
  views: '3960'
  _wp_old_slug: ''
author:
  login: demu
  email: info@demura.net
  display_name: demu
  first_name: ''
  last_name: ''
permalink: "/robot/9ode/8642.html"
---
<div class="mceTemp mceIEcenter">
<dl id="attachment_8644" class="wp-caption aligncenter" style="width: 310px;" /><a href="http://demura.net/wordpress/wp-content/uploads/2011/04/lesson1-1.jpg"><img src="{{ site.baseurl }}/assets/images/2011/04/lesson1-1-300x242.jpg" title="lesson1-1" width="300" height="242" class="size-medium wp-image-8644" /></a></p>
<dd class="wp-caption-dd">ミッション１：ボールを追跡せよ</dd>
</p></div>
<p>昨年度は「物理計算エンジンで学ぶＣ言語」を開講しましたが，今年度はリニューアルし「シミュレータで学ぶＣ言語」を開講します．</p>
<p>まず，上の図にあるような車輪型ロボットシミュレータに，Ｃ言語のプログラミングをしボールを追跡するプログラムを作成します．</p>
<p>このシミュレータではuser_main()関数の中にロボットを動かすプログラムを書きます．</p>
<p>ロボットを移動させる命令（関数）は8行目のmotor(50,50)です．motor関数には右と左モータのパワーを設定します．カッコの中の始めの数字が右モータのパワー，２番目が左モータのパワーで，大きさは-100～100です．前進の場合は，左右のモータを同じパワーにします．</p>
<pre class="brush:cpp;">// robocup1-1.cpp
#include "dm.h"
// motor(右モータのパワー，左モータのパワー）
// パワーは-100から100までの整数値

void user_main()
{
    motor(50, 50); // 直進
}</pre>
<ul>
<li>ダウンロード：<a href="http://demura.net/wordpress/wp-content/uploads/2011/04/robocup1-1-110415.zip">robocup1-1-110415.zip</a></li>
<li>インストール
<ul>
<li>c:\ode-0.11.1\myprogがなければ，そのフォルダを作る．</li>
<li>robocup1-1.zipを解凍し，robocup1-1のフォルダ（ディレクトリ）をc:\ode-0.11.1\myprogの中に移動する．robocup1-1フォルダの場所が重要なので必ず指定の場所に移動すること．</li>
</ul>
</li>
<li>タスク　レベル１
<ul>
<li>後進するプログラムを書き実行しよう．</li>
<li>左回転，右回転するプログラムを書き実行しよう．</li>
</ul>
</li>
</ul>
<p>このロボットは赤外線ボールを探知するセンサを装備しています．ボールセンサの視界が狭く，ほぼ正面（＋―5度）のボールしか検出できません．ボールセンサは０以上の整数値を返し，ボールが近いほど大きな値となります．このセンサはコネクタ１(CN1)のA/Dポートに接続されており，プログラムではCN1の値がセンサ値になります．次のプログラムはCN1の値を表示するプログラムです．</p>
<pre class="brush:cpp;">// robocup1-2.cpp
#include "dm.h"
#include "stdio.h"
// CN1: ボールの値. 大きい値ほどボールが近い

void user_main()
{
     printf("ball sensor=%d \n", CN1);　// ボールセンサの値を表示
}</pre>
<ul>
<li>ダウンロード: <a href="http://demura.net/wordpress/wp-content/uploads/2011/04/robocup1-2-110415.zip">robocup1-2-110415.zip</a></li>
<li>インストール
<ul>
<li>robocup1-2.zipを展開し，先ほど実行したrobocup1-1と同じ場所c:\ode-0.11.1\myprogの中に移動する</li>
</ul>
</li>
<li>タスク　レベル２：CN1の値を調べ，ボールを追跡するプログラムを作りなさい．
<ul>
<li>フローチャートを書きなさい
<ul>
<li>スタート，ストップ，処理，分岐，繰り返しを使います</li>
</ul>
</li>
<li>フローチャートをC言語に直し，実行しなさい
<ul>
<li>if文を使います．user_main関数は繰り返し処理の中の一部なので，C言語で繰り返しをするwhileループは使いません．</li>
<li>ボールセンサの視界が狭いので，ボールを見つけるためには回転をしなければなりません．ボール以外にも赤外線を発するものが周囲にありこれがノイズになっています．ノイズの値より大きいセンサ値だったらボールと判断しましょう．</li>
</ul>
</li>
</ul>
</li>
</ul>
<p>終わり</p>
