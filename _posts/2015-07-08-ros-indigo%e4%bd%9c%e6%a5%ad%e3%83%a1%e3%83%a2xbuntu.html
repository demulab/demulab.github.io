---
layout: post
title: ROS Indigo作業メモ(Xubuntu)
date: 2015-07-08 20:06:21.000000000 +09:00
type: post
parent_id: '0'
published: true
password: ''
status: publish
categories:
- robocup
tags: []
meta:
  _edit_last: '2'
  views: '1086'
author:
  login: demu
  email: info@demura.net
  display_name: demu
  first_name: ''
  last_name: ''
permalink: "/robot/robocup/11959.html"
---
<p style="text-align: justify;">Xubuntu14.04にROS Indigoを入れてTurtlebot2を動かすまでの簡単な作業メモ。</p>
<ul>
<li style="list-style-type: none;">
<ul>
<li style="text-align: justify;">ROSインストール：<a href="http://wiki.ros.org/indigo/Installation/Ubuntu">http://wiki.ros.org/indigo/Installation/Ubuntu</a>のとおり、Desktop-Fullをインストールする。</li>
<li style="text-align: justify;">Turtlebotパッケージのインストール：<a href="http://wiki.ros.org/turtlebot/Tutorials/indigo/Turtlebot%20Installation">http://wiki.ros.org/turtlebot/Tutorials/indigo/Turtlebot%20Installation</a>のとおり、インストールする。
<ul>
<li>sudo apt-get install ros-indigo-turtlebot ros-indigo-turtlebot-apps ros-indigo-turtlebot-interactions ros-indigo-turtlebot-simulator ros-indigo-kobuki-ftdi ros-indigo-rocon-remocon ros-indigo-rocon-qt-library ros-indigo-ar-track-alvar-msgs</li>
</ul>
</li>
<li>Kobukiのセットアップ
<ul>
<li>. /opt/ros/indigo/setup.bash</li>
<li>rosrun kobuki_ftdi create_udev_rules</li>
</ul>
</li>
<li style="text-align: justify;">Hokuyo Lidar設定:<br />
TurtlebotパッケージではHokuyo Lidar (UTM-30LX)の設定がないので追加する。<br />
/opt/ros/indigo/share/turtlebot_description/urdf/turtlebot_library.urdf.xacroに以下のコードを一番下の&lt;/robot&gt;の上に追加する。</p>
<pre class="brush:cpp;">&#60;!-- Urg Lidar --&#62;
  &#60;joint name="laser" type="fixed"&#62;
    &#60;origin xyz="0.13 0.00 0.1" rpy="0 0 0" /&#62;
    &#60;parent link="base_link" /&#62;
    &#60;child link="base_laser_link" /&#62;
  &#60;/joint&#62;

  &#60;link name="base_laser_link"&#62;
    &#60;visual&#62;
      &#60;geometry&#62;
        &#60;box size="0.06 0.06 0.07" /&#62;
      &#60;/geometry&#62;
      &#60;material name="Black" /&#62;
    &#60;/visual&#62;
    &#60;inertial&#62;
      &#60;mass value="0.000001" /&#62;
      &#60;origin xyz="0 0 0" /&#62;
      &#60;inertia ixx="0.0001" ixy="0.0" ixz="0.0"
        iyy="0.0001" iyz="0.0"
        izz="0.0001" /&#62;
    &#60;/inertial&#62;
  &#60;/link&#62;</pre>
</li>
<li style="text-align: justify;"> /opt/ros/indigo/share/turtlebot_bringup/launch/3dsensor.launchの次の部分を変更する。<br />
変更前：</p>
<pre class="brush:cpp;"> &#60;arg name="scan_topic" default="scan"/&#62;</pre>
<p>変更後:</p>
<pre class="brush:cpp;"> &#60;arg name="scan_topic" default="kinect_scan"/&#62;
 &#60;node name="laser_driver" pkg="urg_node" type="urg_node"&#62; &#60;param name="frame_id" value="base_laser_link" /&#62;&#60;/node&#62;</pre>
</li>
<li style="text-align: justify;">/opt/ros/indigo/share/turtlebot_navigation/param/cosmap_common_params.yamlの31行目のmin_obstacle_heightを0.05,32行目のmax_obstacle_heightを1.2に変更する．Hokuyo Lidarを低い位置に取り付けるため．この設定をしないと障害物回避をしないので悩むことになる．この設定では高さ0.05[m]以上1.2[m]以下の障害物を回避する。それ以外は回避しない。ロボットの高さやセンサの取り付け位置でこの値を変更する。
<pre class="brush:cpp;"> 
 scan:
    data_type: LaserScan
    topic: scan
    marking: true
    clearing: true
    min_obstacle_height: 0.05
    max_obstacle_height: 1.2
</pre>
</li>
</ul>
</li>
<li>urg nodeをインストールする。
<ul>
<li>sudo apt-get install ros-indigo-urg-node</li>
</ul>
</li>
<li>doxygenのインストール
<ul>
<li>$ sudo apt-get install doxygen  doxygen-gui</li>
</ul>
</li>
<li><a href="http://www.rt-shop.jp/blog/archives/3372">RTのlibkobuki1.0.3をここからダウンロード</a>しインストール。
<ul>
<li>$ unzip libkobuki-1.0.3.zip</li>
<li>$ cd libkobuki-1.0.3</li>
<li>$ unzip libkobuki-1.0.3src.zip</li>
<li>$ ./BuildAll.sh
<ul>
<li>私の環境では改行コードの関係でエラーがでたので以下のコマンドでLinux用に修正する。</li>
<li>$ sed -i 's/\r//'  BuildAll.sh</li>
<li>$ ./BuildAll.sh</li>
</ul>
</li>
<li>cd build-linux</li>
<li>make</li>
<li>sudo make install</li>
</ul>
</li>
<li>Julius4.3.1を<a href="http://julius.sourceforge.jp/index.php?q=documents.html#install">ここからダウンロード</a>しThe juliusbook第２章に従いソースからインストール。</li>
<li>Sirius-1.0.1(437MB)を<a href="http://sirius.clarity-lab.org/index.html%3Fp=13.html">ここからダウンロード</a>し，~/srcの中にコピーする．wiki_indri_index.tar.gz(11GB)も合わせてダウンロード．
<ul>
<li>cd ~/src</li>
<li>tar xvzf  sirius-1.0.1.tar.gz</li>
<li>mv sirius-1.0.1 sirius</li>
<li>cd ~/src/sirius/sirius-application</li>
<li>tar xvzf  question-answer.tar.gz</li>
<li>sudo  ./get-dependencies.sh</li>
<li>./get-kaldi.sh</li>
<li>./compile-sirius-server.sh</li>
</ul>
</li>
<li>各種パッケージのインストール
<ul>
<li>sudo apt-get install ros-indigo-moveit-full</li>
<li>sudo apt-get install ros-indigo-sound-play</li>
<li>sudo apt-get install ros-indigo-rospeex</li>
<li>sudo apt-get install ros-indigo-cv-backports</li>
</ul>
</li>
<li>終わり。お疲れ様。</li>
</ul>
<p>&nbsp;</p>
