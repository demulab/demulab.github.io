---
layout: post
title: PepperをROSで動かす：PS3コントローラーで操縦
date: 2015-08-14 18:09:11.000000000 +09:00
type: post
parent_id: '0'
published: true
password: ''
status: publish
categories:
- robocup
tags: []
meta:
  _edit_last: '2'
  views: '2816'
author:
  login: demu
  email: info@demura.net
  display_name: demu
  first_name: ''
  last_name: ''
permalink: "/robot/robocup/12022.html"
---
<p>SoftbankのPepperをROSで動かすメモ。今回はTeleop。PS3コントローラーでPepperを動かしてみた。Pepperはオムニロボットなので360度自由な方向に動ける。</p>
<p>環境：Ubuntu14.04, ROS Indigo</p>
<p><a href="http://demura.net/wordpress/wp-content/uploads/2015/08/ps3.jpg"><img src="{{ site.baseurl }}/assets/images/2015/08/ps3.jpg" alt="ps3" width="960" height="710" class="aligncenter size-full wp-image-12024" /></a></p>
<ul>
<li>teleop_twist_joyのインストール
<ul>
<li>cd ~/catkin_ws/src</li>
<li>git clone https://github.com/ros-teleop/teleop_twist_joy.git</li>
</ul>
</li>
<li>PS3を使う準備
<ul>
<li>sudo  apt-add-repository  ppa:falk-t-j/qtsixa</li>
<li>sudo  apt-get  update</li>
<li>sudo  apt-get  install  sixad</li>
<li>ペアリング:ＰＳ３コントローラとノートパソコンをUSBケーブルで接続した後で次のコマンドを実行
<ul>
<li>sudo  sixpair</li>
</ul>
</li>
<li>USBケーブルをPS3コントローラーから外して、次のコマンドを実行し、PS3ボタンを押すことで認識される。認識したら振動で教えてくれる。
<ul>
<li><code>sixad  --start</code></li>
</ul>
</li>
</ul>
</li>
<li> Pepperは全方向移動機構なので設定ファイルを変更する
<ul>
<li>cd  ~/catkin_ws/src/teleop_twist_joy/config</li>
<li>cp  ps3.config.yaml   ps3.config.yaml.org</li>
<li>cp  ps3-holonomic.config.yaml   ps3.config.yaml</li>
</ul>
</li>
<li>以下のコマンドをそれぞれ別の端末で実行する
<ul>
<li>roscore</li>
<li>roslaunch  pepper_bringup  pepper_full_py.launch nao_ip:=192.168.0.2 （このIPは操作するペッパーのものに変更）</li>
<li>roslaunch  teleop_twist_joy  teleop.launch</li>
</ul>
</li>
<li>PS3コントローラーのL1ボタンを押しながら、左のジョイスティックを操作すると３６０度好きな方向に並進運動する。L1ボタンを押しながら、右のジョイスティックを操作すると回転運動する。</li>
<li>注意点としては、Pepperの後ろ下部にある電源プラグのふたを完全に閉じないとPepperが動かないこと。また、付近に障害物があると移動いないので周囲１ｍくらいクリアにして動かしましょう。</li>
</ul>
<p>&nbsp;</p>
<p>&nbsp;</p>
