---
layout: post
title: ROS×Python勉強会：Turtlebotを動かそう！
date: 2015-10-22 15:33:42.000000000 +09:00
type: post
parent_id: '0'
published: true
password: ''
status: publish
categories:
- lecture
tags: []
meta:
  _edit_last: '2'
  views: '2760'
author:
  login: demu
  email: info@demura.net
  display_name: demu
  first_name: ''
  last_name: ''
permalink: "/education/lecture/12298.html"
---
<p>この記事は生活支援ロボット：ROS×Python勉強会用の資料です。Turtlebot2/KOBUKIを動かします。次のROS Wikiを参考にしています。</p>
<p>この記事は私が担当している講義ロボットプログラミングⅡ用です。シミュレータGAZEBOを使い、Turtlebotを動かします。次のROS Wikiを参考にしています。</p>
<ul>
<li><a href="http://wiki.ros.org/turtlebot/Tutorials">turtlebot/Tutorials</a></li>
</ul>
<p>1.  Turtlebot用のパッケージインストール<br />
まず、Turtlebot用のパッケージをインストール。端末を開き、次のコマンドを実行。<br />
<code>$ sudo apt-get update </code><br />
<code>$ sudo apt-get install ros-indigo-turtlebot ros-indigo-turtlebot-apps ros-indigo-turtlebot-interactions ros-indigo-turtlebot-simulator ros-indigo-kobuki-ftdi ros-indigo-rocon-remocon ros-indigo-rocon-qt-library ros-indigo-ar-track-alvar-msgs</code><br />
<code> $ .  /opt/ros/indigo/setup.bash </code><br />
<code> $ rosrun kobuki_ftdi create_udev_rules </code></p>
<p>2. VirtualBoxの設定<br />
VirtualBox以外の人は次に進む。なお、VirtualBoxのUbuntuからTurtlebotを動かす場合はノートパソコンにUSB2.0のポートが必要です。USB3.0しかない場合はデュアルブートでLinuxを起動できるようにする必要があります。未確認ですがVMwareなら可能かもしれません。VMwareお持ちの方は試してください。</p>
<p>Virtualboxを起動する。設定→USBをクリック。USBデバイスフィルター右の赤枠で囲んだ「コネクタに＋のついたアイコン」をクリック。Yujin robot iCleboKobukiを選択し、「OK」をクリック。<br />
<a href="http://demura.net/wordpress/wp-content/uploads/2015/10/virtualbox_setting11.jpg"><img src="{{ site.baseurl }}/assets/images/2015/10/virtualbox_setting11-300x123.jpg" alt="virtualbox_setting1" width="300" height="123" class="aligncenter size-medium wp-image-12301" /></a></p>
<p>3. ロボットをキーボードから動かそう<br />
これからキーボードでシミュレータ上のロボットを操縦します。まず、デバイスファイルができているか確認する。</p>
<p>次のコマンドで/devにあるデバイスファイルを表示する。ttyUSB0（ゼロ）があればOK<br />
<code>$  ls  /dev/tty*</code></p>
<p>/dev/ttyUSB0はス―バーユーザの権限がないと使えないので、ユーザが使えるように次のコマンドでファイルのアクセス権を変更する。<br />
<code>$ sudo chmod  u+x   /dev/ttyUSB0</code></p>
<p>では、ロボットを動かすための最小限(minimal)ノードを起動しよう！<br />
<code> $ roslaunch turtlebot_bringup minimal.launch </code></p>
<p>別の端末を開き、次のコマンドでキーボードからロボットを操縦するノードを起動。<br />
<code> $ roslaunch turtlebot_teleop keyboard_teleop.launch </code></p>
<p>端末に下のように表示される。<span style="color: #ff0000;">u</span>  <span style="color: #ff0000;">i　</span><span style="color: #ff0000;">o</span> <span style="color: #ff0000;"> j</span>  <span style="color: #ff0000;">k</span>  <span style="color: #ff0000;">l</span>  <span style="color: #ff0000;">m</span><span style="color: #ff0000;"> ,　.</span>キーでロボットを操作できる。いずれかのキーを押してロボットを動かそう！<br />
<a href="http://demura.net/wordpress/wp-content/uploads/2015/10/teleop1.jpg"><img src="{{ site.baseurl }}/assets/images/2015/10/teleop1.jpg" alt="teleop" width="660" height="475" class="aligncenter size-full wp-image-12242" /></a></p>
<p>終わり</p>
