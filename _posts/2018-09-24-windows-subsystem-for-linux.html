---
layout: post
title: 'WSL: Windows Subsystem for Linuxのインストールと設定'
date: 2018-09-24 19:47:25.000000000 +09:00
type: post
parent_id: '0'
published: true
password: ''
status: publish
categories:
- lecture
tags: []
meta:
  _edit_last: '2'
  views: '4837'
  _thumbnail_id: '15138'
  _wp_old_date: '2018-09-20'
author:
  login: demu
  email: info@demura.net
  display_name: demu
  first_name: ''
  last_name: ''
permalink: "/education/lecture/15062.html"
---
<ul>
<li>バージョンの確認
<ul>
<li>「スタートメニュー→歯車アイコン（設定）→システム→バージョン情報」を確認しWindowsの1709以上なら良い。バージョンが低い場合は「更新とセキュリティ」から更新する。<br />
<a href="http://demura.net/wordpress/wp-content/uploads/2018/09/version.png"><img src="{{ site.baseurl }}/assets/images/2018/09/version.png" alt="" width="860" height="558" class="aligncenter size-full wp-image-15125" /></a></li>
</ul>
</li>
<li>Windows Subsystem for Linuxの有効化
<ul>
<li>スタートメニュ→Windowsシステムツール→コントロールパネル→プログラム→プログラムと機能→Windowsの機能の有効化または無効化をクリックする。<br />
<a href="http://demura.net/wordpress/wp-content/uploads/2018/09/windows_function.png"><img src="{{ site.baseurl }}/assets/images/2018/09/windows_function.png" alt="" width="1031" height="420" class="aligncenter size-full wp-image-15128" /></a></li>
<li>Windows Subsystem for Linuxにチェックを入れ、「OK」をクリックする。<br />
<a href="http://demura.net/wordpress/wp-content/uploads/2018/09/No-0033.png"><img src="{{ site.baseurl }}/assets/images/2018/09/No-0033.png" alt="" width="420" height="376" class="aligncenter size-full wp-image-15065" /></a></li>
<li>再起動するように聞かれるので再起動する。</li>
</ul>
</li>
<li>Ubuntuをストアからインストール
<ul>
<li>スタートメニューの検索窓に「store」と入力すると「Microsoft Store」と表示されるのでそれをクリックする。<br />
<a href="http://demura.net/wordpress/wp-content/uploads/2018/09/No-0036.png"><img src="{{ site.baseurl }}/assets/images/2018/09/No-0036.png" alt="" width="413" height="689" class="aligncenter size-full wp-image-15069" /></a></li>
</ul>
</li>
<li>下記の画面になるので、Ubutu 16.04LTSを選択しクリックする。下の画面にならない場合は「検索」にUbuntuと入力する。<br />
<a href="http://demura.net/wordpress/wp-content/uploads/2018/09/No-0038.png"><img src="{{ site.baseurl }}/assets/images/2018/09/No-0038.png" alt="" width="1202" height="933" class="aligncenter size-full wp-image-15071" /></a></li>
<li>次のウインドウになるので「入手」をクリックする。<br />
<a href="http://demura.net/wordpress/wp-content/uploads/2018/09/No-0039.png"><img src="{{ site.baseurl }}/assets/images/2018/09/No-0039.png" alt="" width="1202" height="933" class="aligncenter size-full wp-image-15073" /></a></li>
<li>入手が終わると次の画面になるので「起動」をクリックする。<br />
<a href="http://demura.net/wordpress/wp-content/uploads/2018/09/No-0040-1.png"><img src="{{ site.baseurl }}/assets/images/2018/09/No-0040-1.png" alt="" width="1202" height="676" class="aligncenter size-full wp-image-15076" /></a></li>
<li>次のウインドウになるので少し待つ。<br />
<a href="http://demura.net/wordpress/wp-content/uploads/2018/09/No-0041-1.png"><img src="{{ site.baseurl }}/assets/images/2018/09/No-0041-1.png" alt="" width="979" height="296" class="aligncenter size-full wp-image-15079" /></a></li>
<li>ユーザ名とパスワードを聞かれるので入力する。<br />
<a href="http://demura.net/wordpress/wp-content/uploads/2018/09/No-0042.png"><img src="{{ site.baseurl }}/assets/images/2018/09/No-0042.png" alt="" width="979" height="296" class="aligncenter size-full wp-image-15080" /></a></li>
<li>時間帯の設定。標準では、日本の時間帯ではないので以下のコマンドを端末に入力する。パスワードを聞かれるので入力する。
<ul>
<li>$ sudo dpkg-reconfigure tzdata<br />
<a href="http://demura.net/wordpress/wp-content/uploads/2018/09/No-0044.png"><img src="{{ site.baseurl }}/assets/images/2018/09/No-0044.png" alt="" width="979" height="296" class="aligncenter size-full wp-image-15082" /></a></li>
<li>次のウインドウになるので「OK」をクリックする。<br />
<a href="http://demura.net/wordpress/wp-content/uploads/2018/09/No-0045.png"><img src="{{ site.baseurl }}/assets/images/2018/09/No-0045.png" alt="" width="979" height="296" class="aligncenter size-full wp-image-15083" /></a></li>
<li>Asiaを選択してEnterキーを押す。<br />
<a href="http://demura.net/wordpress/wp-content/uploads/2018/09/No-0046.png"><img src="{{ site.baseurl }}/assets/images/2018/09/No-0046.png" alt="" width="979" height="296" class="aligncenter size-full wp-image-15085" /></a></li>
<li>「T」を押すとTaipeに飛ぶので、下矢印キーでTokyoを選択し、Enterキーを押す。<br />
<a href="http://demura.net/wordpress/wp-content/uploads/2018/09/No-0047.png"><img src="{{ site.baseurl }}/assets/images/2018/09/No-0047.png" alt="" width="979" height="296" class="aligncenter size-full wp-image-15086" /></a></li>
<li>dateコマンドを端末に入力して正しい時間帯になっていたら終わり。<br />
<a href="http://demura.net/wordpress/wp-content/uploads/2018/09/No-0048.png"><img src="{{ site.baseurl }}/assets/images/2018/09/No-0048.png" alt="" width="979" height="296" class="aligncenter size-full wp-image-15088" /></a></li>
</ul>
</li>
<li>ダウンロード先の変更。標準では海外からダウンロードするようになっているので、時短するために国内に変更する。
<ul>
<li>$ sudo sed -i 's/\/archive\.ubuntu/\/jp\.archive\.ubuntu/' /etc/apt/sources.list<br />
<a href="http://demura.net/wordpress/wp-content/uploads/2018/09/No-0049.png"><img src="{{ site.baseurl }}/assets/images/2018/09/No-0049.png" alt="" width="907" height="103" class="aligncenter size-full wp-image-15090" /></a></li>
</ul>
</li>
<li>次のコマンドでアップデートする。
<ul>
<li>$ sudo apt update</li>
<li>$ sudo apt upgrade -y</li>
</ul>
</li>
<li>X Window システムのインストール。調べたらVcXsrvが良さそうなのでインストールしてみる。
<ul>
<li>https://sourceforge.net/projects/vcxsrv/files/vcxsrv/<a href="http://demura.net/wordpress/wp-content/uploads/2018/09/No-0050.png"><img src="{{ site.baseurl }}/assets/images/2018/09/No-0050.png" alt="" width="1114" height="967" class="aligncenter size-full wp-image-15094" /></a></li>
<li>ダウンロードしたexeファイルをダブルクリックする。「Next」をダブルクリックする。<br />
<a href="http://demura.net/wordpress/wp-content/uploads/2018/09/No-0051.png"><img src="{{ site.baseurl }}/assets/images/2018/09/No-0051.png" alt="" width="422" height="290" class="aligncenter size-full wp-image-15096" /></a></li>
<li>インストールするフォルダーを聞かれるので、デフォルトのまま「Next」をクリックする。<a href="http://demura.net/wordpress/wp-content/uploads/2018/09/No-0052.png"><img src="{{ site.baseurl }}/assets/images/2018/09/No-0052.png" alt="" width="422" height="290" class="aligncenter size-full wp-image-15097" /></a></li>
<li>セットアップが終わったら「Close」をクリックしてインストールを終了する。<br />
<a href="http://demura.net/wordpress/wp-content/uploads/2018/09/No-0053.png"><img src="{{ site.baseurl }}/assets/images/2018/09/No-0053.png" alt="" width="422" height="290" class="aligncenter size-full wp-image-15098" /></a></li>
</ul>
</li>
<li>Ｘ起動
<ul>
<li>デスクトップできたXLaunchアイコンをダブルクリックする。</li>
<li>Select display settingsのウインドウになるのでデフォルトのまま「次へ」をクリックする。<br />
<a href="http://demura.net/wordpress/wp-content/uploads/2018/09/No-0054.png"><img src="{{ site.baseurl }}/assets/images/2018/09/No-0054.png" alt="" width="510" height="367" class="aligncenter size-full wp-image-15102" /></a></li>
<li>Select how to start clientのウインドウになるので、デフオルトのまま「次へ」をクリックする。<br />
<a href="http://demura.net/wordpress/wp-content/uploads/2018/09/No-0055.png"><img src="{{ site.baseurl }}/assets/images/2018/09/No-0055.png" alt="" width="510" height="367" class="aligncenter size-full wp-image-15103" /></a></li>
<li>Extra Settingsのウインドウになるので Clipboard、Primary Selection、Disable　access controlにチェックを入れ、Native openglのチェックを外して「次へ」をクリックする。<br />
<a href="http://demura.net/wordpress/wp-content/uploads/2018/09/extrasetting.png"><img src="{{ site.baseurl }}/assets/images/2018/09/extrasetting.png" alt="" width="510" height="367" class="aligncenter size-full wp-image-15135" /></a></li>
<li>Finish configurationウインドウになるので、「Save configuration」をクリックしてから「完了」をクリックする。<br />
<a href="http://demura.net/wordpress/wp-content/uploads/2018/09/No-0057.png"><img src="{{ site.baseurl }}/assets/images/2018/09/No-0057.png" alt="" width="510" height="367" class="aligncenter size-full wp-image-15107" /></a></li>
<li>ファイアウォールなどを設定している場合は、次の図のように「Windowsセキュリティの重要な警告」というウインドウが開くので、「アクセスを許可する」をクリックする。<br />
<a href="http://demura.net/wordpress/wp-content/uploads/2018/09/No-0060.png"><img src="{{ site.baseurl }}/assets/images/2018/09/No-0060.png" alt="" width="615" height="435" class="aligncenter size-full wp-image-15108" /></a></li>
</ul>
</li>
<li>Ubuntuの設定
<ul>
<li>スタートメニュー→Ubuntu 16.04でUbuntuターミナルを起動する。<br />
デスクトップにショートカットを作っておくと便利。</li>
<li> 起動したターミナルで以下のコマンドを実行し、必要なパッケージをインストールする。なお、$はプロンプトなの入力しない。
<ul>
<li>$ sudo apt update</li>
<li>$ sudo apt upgrade</li>
<li>$ sudo apt-get install language-pack-ja</li>
<li>$  sudo update-locale LANG=ja_JP.UTF-8</li>
<li>$ sudo apt-get install git emacs gedit build-essential firefox dbus</li>
</ul>
</li>
<li>環境変数の設定
<ul>
<li>自分のパソコンにLinuxのウインドウアプリケーションが表示されるように環境変数を設定する。
<ul>
<li>$ echo 'export DISPLAY=localhost:0.0' &gt;&gt; ~/.bashrc</li>
<li>$ source ~/.bashrc</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><a href="http://demura.net/lecture/15261.html">ROS Kineticのインストール</a>
<ul>
<li>上のリンクに従ってインストール作業をしてから、以下の設定を行う。</li>
<li> Gazeboを起動すると画面が真っ黒で何も表示されない。モデルが表示されるように以下のコマンドで環境変数を設定する。
<ul>
<li>$ echo 'export GAZEBO_IP=127.0.0.1' &gt;&gt; ~/.bashrc</li>
<li>$ source ~/.bashrc</li>
</ul>
</li>
<li>Gazeboの起動
<ul>
<li>Ubuntuターミナルを起動し、次のコマンドを実行する。
<ul>
<li>$ gazebo<br />
<a href="http://demura.net/wordpress/wp-content/uploads/2018/09/gazebo.png"><img src="{{ site.baseurl }}/assets/images/2018/09/gazebo.png" alt="" width="1210" height="660" class="aligncenter size-full wp-image-15138" /></a></li>
</ul>
</li>
</ul>
</li>
<li>rvizでdbus関係のエラーを解決するためにmachine IDを設定する。Ubuntuターミナルを起動し、次のコマンドを実行する。
<ul>
<li>$ dbus-uuidgen | sudo tee /etc/machine-id</li>
</ul>
</li>
<li>rvizの起動
<ul>
<li>Ubuntuターミナルを起動し、次のコマンドを実行する。
<ul>
<li>$ roscore</li>
</ul>
</li>
<li>もう一つ、Ubuntuターミナルを起動し、次のコマンドを実行する。
<ul>
<li>$ rosrun  rviz  rviz<br />
<a href="http://demura.net/wordpress/wp-content/uploads/2018/09/rviz.png"><img src="{{ site.baseurl }}/assets/images/2018/09/rviz.png" alt="" width="382" height="206" class="aligncenter wp-image-15139" /></a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<p style="padding-left: 30px; text-align: right;">終わり</p>
