---
layout: post
title: 'WSL: RvizやGazeboが起動しない'
date: 2018-11-10 16:32:15.000000000 +09:00
type: post
parent_id: '0'
published: true
password: ''
status: publish
categories:
- lecture
tags: []
meta:
  _edit_last: '2'
  views: '6598'
author:
  login: demu
  email: info@demura.net
  display_name: demu
  first_name: ''
  last_name: ''
permalink: "/education/lecture/15304.html"
---
<p>WSL(Windows Subsystem for Linux)でXサーバーを立ち上げて問題なく、RvizとGazeboを使えていたがsudo apt upgradeや他のアプリケーションをインストールしているうちに glxgearsやrqtなどのウインドウアプリケーションは起動するが、RvizとGazeboが起動しないという現象に陥った。私の環境では以下の設定でRvizとGazeboが起動するようになった。以前の設定と主な変更点は.bashrcのLIBGL_ALWAYS_INDIRECT=1をコメント化し、VcXsrvの起動オプションに-nowglを追加した。</p>
<ul>
<li><strong>環　境</strong>
<ul>
<li>Windows10 バージョン： 1803
<ul>
<li>スタート→設定→システム→バージョン情報で確認</li>
</ul>
</li>
<li>Ubuntu バージョン：16.04.5 LTS
<ul>
<li><code>$ lsb_release -a</code></li>
</ul>
</li>
<li>VcXsrv X Serverバージョン: 1.20.1.3 (15 Sep 2018)
<ul>
<li>アイコン→右マウスクリック→about</li>
</ul>
</li>
<li>OpenGLバージョン<br />
<a href="http://demura.net/wordpress/wp-content/uploads/2018/11/No-0145.png"><img src="{{ site.baseurl }}/assets/images/2018/11/No-0145.png" alt="" width="704" height="232" class="aligncenter size-full wp-image-15306" /></a></li>
<li> Qtバージョン：5.5.1
<ul>
<li><code>$ qmake -query QT_VERSION</code></li>
</ul>
</li>
<li>Gazeboバージョン：7.14.0
<ul>
<li><code>$  gazebo -v</code></li>
</ul>
</li>
</ul>
</li>
<li><strong>設　定</strong>
<ul>
<li>.bashrcの関係のありそうな部分<a href="http://demura.net/wordpress/wp-content/uploads/2018/11/No-0144.png"><img src="{{ site.baseurl }}/assets/images/2018/11/No-0144.png" alt="" width="640" height="233" class="aligncenter size-full wp-image-15305" /></a>  LIBGL_ALWAYS_INDIRECT=1を有効にするとRvizとGazeboは起動しなかったが、rqtやglxgearsは起動した。</li>
<li>VcXsrvの起動オプション
<ul>
<li><code>"C:\Program Files\VcXsrv\vcxsrv.exe" :0 -ac -multiwindow -reset -terminate -nowgl</code></li>
</ul>
</li>
</ul>
</li>
</ul>
<p>終り</p>
