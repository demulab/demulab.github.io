---
layout: post
title: ROS演習３：シミュレータを動かそう！
date: 2019-05-28 06:03:49.000000000 +09:00
type: post
parent_id: '0'
published: true
password: ''
status: publish
categories:
- lecture
tags: []
meta:
  _edit_last: '2'
  views: '7381'
  _thumbnail_id: '13878'
  _quads_config_visibility: a:0:{}
  the_page_seo_title: ''
  the_page_meta_description: ''
  the_page_meta_keywords: ''
  the_page_noindex: '0'
  the_page_nofollow: '0'
  the_page_ads_novisible: '0'
  page_type: default
  the_page_toc_novisible: '0'
  update_level: high
  redirect_url: ''
  the_page_no_amp: '0'
  _custom_css: ''
  _custom_js: ''
  the_page_memo: ''
  sns_image_url: ''
  _wp_old_date: '2017-11-08'
author:
  login: demu
  email: info@demura.net
  display_name: demu
  first_name: ''
  last_name: ''
permalink: "/education/lecture/13868.html"
---
<p>今回はシミュレータGAZEBOを使い、Turtlebot3を動かします。次のTurtleBot3 Official Wikiを参考にしています。</p>
<ul>
<li><a href="http://turtlebot3.robotis.com/en/latest/index.html">TurtleBot3 Official Wiki</a></li>
</ul>
<p>0. VirtualBoxの3Dアクセラレーション無効化<br />
VirtualBox-&gt;設定-&gt;ディスプレイ-&gt;3Dアクセレーション有効化のチェックを外す。<br />
<strong><span style="color: #ff0000;">この作業をしてからVirtualBoxを起動しないとシミュレータを起動できません。</span></strong></p>
<p>1.  Turtlebot3 リモートPC用のパッケージインストール<br />
まず、Turtlebot用のパッケージをインストール。端末を開き、次のコマンドを実行。２番目は長いのでコピペする。$はコマンドプロンプトなので入力しない。</p>
<p><code>$ sudo apt-get update</code></p>
<p><code>$ sudo apt-get install ros-kinetic-joy ros-kinetic-teleop-twist-joy ros-kinetic-teleop-twist-keyboard ros-kinetic-laser-proc ros-kinetic-rgbd-launch ros-kinetic-depthimage-to-laserscan ros-kinetic-rosserial-arduino ros-kinetic-rosserial-python ros-kinetic-rosserial-server ros-kinetic-rosserial-client ros-kinetic-rosserial-msgs ros-kinetic-amcl ros-kinetic-map-server ros-kinetic-move-base ros-kinetic-urdf ros-kinetic-xacro ros-kinetic-compressed-image-transport ros-kinetic-rqt-image-view ros-kinetic-gmapping ros-kinetic-navigation</code><code></code><code></code></p>
<p><code><br />
$ cd ~/catkin_ws/src/<br />
$ git clone https://github.com/ROBOTIS-GIT/turtlebot3_msgs.git<br />
$ git clone https://github.com/ROBOTIS-GIT/turtlebot3.git<br />
$ cd ~/catkin_ws &amp;&amp; catkin_make<br />
</code></p>
<p>2. シミュレータのインストール<br />
<code><br />
$ cd ~/catkin_ws/src/<br />
$ git clone https://github.com/ROBOTIS-GIT/turtlebot3_simulations.git<br />
$ cd ~/catkin_ws &amp;&amp; catkin_make</code><code></code></p>
<p>&nbsp;</p>
<p>3. rvizの起動</p>
<p>端末を開き次のコマンドを実行<br />
<code><br />
$  export TURTLEBOT3_MODEL=burger<br />
$  roslaunch turtlebot3_fake turtlebot3_fake.launch<br />
</code><br />
別の端末を開き、次のコマンドを実行<br />
<code><br />
$ roslaunch turtlebot3_teleop turtlebot3_teleop_key.launch<br />
</code></p>
<p>演習１で実施したようにキーボードでROSの視覚化ツールrviz上でturtlebot3を動かせます。動かしてみましょう！</p>
<p>4.  Simulator GAZEBOを動かそう</p>
<p>$ export TURTLEBOT3_MODEL=burger<br />
$ roslaunch turtlebot3_gazebo turtlebot3_empty_world.launch</p>
<p>初回はネットからモデルを取得するので、私の環境で5分程度かかった。しばらくすると次のようなウインドウが開く。下のロボットがturtlebot3。<br />
<a href="http://demura.net/lecture/13868.html/attachment/gazebo-2" rel="attachment wp-att-13878"><img class="aligncenter size-full wp-image-13878" src="{{ site.baseurl }}/assets/images/2019/05/gazebo.png" alt="" width="943" height="506" /></a><code> </code></p>
<p>別の端末を開き、次のコマンドを入力するとキーボードからロボットを操縦するためのlaunchファイルを起動。<br />
$  roslaunch turtlebot3_teleop turtlebot3_teleop_key.launch</p>
<p>端末に下のように表示される。<span style="color: #ff0000;">w a s d x</span><span style="color: #ff0000;"> </span>キーでロボットを操作できる。いずれかのキーを押してロボットを動かそう！マウスのカーソルがturtlebot3_teleop_key.launchを起動した端末上になければ動かないので注意。</p>
<p><a href="http://demura.net/lecture/13868.html/attachment/control" rel="attachment wp-att-13879"><img class="aligncenter size-full wp-image-13879" src="{{ site.baseurl }}/assets/images/2019/05/control.png" alt="" width="814" height="510" /></a></p>
<p>お疲れ様！</p>
<p>終わり</p>
